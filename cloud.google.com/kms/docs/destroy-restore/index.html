





<!DOCTYPE html><html lang="en"
      class="chekov"><head><script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script><meta charset="utf-8"><meta name="xsrf_token" content="hA1S9yL9qcKto8euEJOv50eMA-1dkhNgrGLg9cRhtQU6MTUyNDQ2MDQ4OTAzMTQ0MA" /><link rel="canonical" href="https://cloud.google.com/kms/docs/destroy-restore"><link rel="alternate" href="https://cloud.google.com/kms/docs/destroy-restore?hl=pt-br" hreflang="pt-br"><link rel="alternate" href="https://cloud.google.com/kms/docs/destroy-restore?hl=ja" hreflang="ja"><link rel="alternate" href="https://cloud.google.com/kms/docs/destroy-restore?hl=de" hreflang="de"><link rel="alternate" href="https://cloud.google.com/kms/docs/destroy-restore" hreflang="en"><link rel="alternate" href="https://cloud.google.com/kms/docs/destroy-restore" hreflang="x-default"><link rel="shortcut icon" href="https://cloud.google.com/_static/d7147bb846/images/cloud/icons/favicons/onecloud/favicon.ico"><link rel="apple-touch-icon" href="https://cloud.google.com/_static/d7147bb846/images/cloud/icons/favicons/onecloud/apple-icon.png"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet"
      
      href="//fonts.googleapis.com/css?family=Google+Sans:400|Roboto:400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"
      ><link rel="stylesheet"
        href="https://cloud.google.com/_static/d7147bb846/css/devsite-cloud-white.css"><link rel="stylesheet" href="https://cloud.google.com/_static/d7147bb846/css/cloud/cloud-site.css"><link rel="search"
        type="application/opensearchdescription+xml"
        title="Google Cloud"
        href="https://cloud.google.com/s/opensearch.xml"><script src="https://cloud.google.com/_static/d7147bb846/js/jquery-bundle.js"></script><meta property="og:site_name" content="Google Cloud"><meta property="og:type" content="website"><meta property="og:url" content="https://cloud.google.com/kms/docs/destroy-restore"><meta property="og:locale" content="en"><script>
    var ___gcfg = ___gcfg || {};
    ___gcfg.lang = 'en';
  </script><title>Destroying and restoring key versions &nbsp;|&nbsp; Cloud KMS Documentation
      &nbsp;|&nbsp; Google Cloud</title><meta property="og:title" content="Destroying and restoring key versions &nbsp;|&nbsp; Cloud KMS Documentation
      &nbsp;|&nbsp; Google Cloud"></head><body class="
               devsite-doc-page
               
               
               
               
               devsite-header-no-lower-tabs"
        data-family="endorsed"
        id="top_of_page"><div class="devsite-wrapper"><div class="devsite-top-section-wrapper
            "><header class="devsite-top-section nocontent"><div class="devsite-top-logo-row-wrapper-wrapper"><div class="devsite-top-logo-row-wrapper"><div class="devsite-top-logo-row devsite-full-site-width"><button type="button" class="devsite-expand-section-nav devsite-header-icon-button
                                       button-flat material-icons gc-analytics-event"
                  data-category="Site-Wide Custom Events" data-label="Hamburger menu"></button><div class="devsite-product-name-wrapper"><a href="https://cloud.google.com/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo"><img src="https://cloud.google.com/_static/d7147bb846/images/cloud/cloud-logo.svg"
       class="devsite-site-logo" alt="Google Cloud"><span class="devsite-site-name devsite-product-name">Google Cloud</span></a></div><div class="devsite-header-upper-tabs"><nav class="devsite-doc-set-nav devsite-nav devsite-overflow-tabs-scroll-wrapper"><ul class="devsite-doc-set-nav-tab-list devsite-overflow-tabs-scroll"><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://cloud.google.com/why-google/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Why Google"
       
         track-type="globalNav"
       
         track-name="whyGoogle"
       >
        Why Google
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://cloud.google.com/products/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Products"
       
         track-type="globalNav"
       
         track-name="products"
       >
        Products
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://cloud.google.com/solutions/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Solutions"
       
         track-type="globalNav"
       
         track-name="solutions"
       >
        Solutions
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://cloud.google.com/launcher/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Launcher"
       
         track-type="globalNav"
       
         track-name="launcher"
       >
        Launcher
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://cloud.google.com/pricing/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Pricing"
       
         track-type="globalNav"
       
         track-name="pricing"
       >
        Pricing
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://cloud.google.com/customers/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Customers"
       
         track-type="globalNav"
       
         track-name="customers"
       >
        Customers
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://cloud.google.com/docs/"
         class="devsite-doc-set-nav-active devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         aria-label="Documentation, selected"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Documentation"
       >
        Documentation
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://cloud.google.com/support/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Support"
       
         track-type="globalNav"
       
         track-name="support"
       >
        Support
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://cloud.google.com/partners/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Partners"
       
         track-type="globalNav"
       
         track-name="partners"
       >
        Partners
      </a></li></ul></nav></div><form class="devsite-search-form"
                action="https://cloud.google.com/s/results/"
                method="GET"
                id="top-search"
                search-placeholder='Search'><div id="searchbox" class="devsite-searchbox"><input placeholder='Search'
         
         type="text"
         class="devsite-search-field devsite-search-query"
         name="q"
         value=""
         autocomplete="off"
         
         aria-label="Search box"><div class="devsite-search-image material-icons"></div></div><input type="hidden"
       name="p"
       id="search_project"
       value="/kms/docs/"
       data-project-name="Cloud KMS Documentation"
       data-project-path="/kms/docs/"
       data-query-match=""><input type="hidden" class="suggest-project" value="Cloud KMS Documentation" /></form><a class="devsite-header-link devsite-top-button button gc-analytics-event"
               href="//console.cloud.google.com/"
               data-category="Site-Wide Custom Events"
               data-label="Site header link"
               track-type="navigateTo"
               track-name="console"
               track-metadata-position="nav"><div class="devsite-header-link-label">Console</div></a><button type="button" class="devsite-search-button devsite-header-icon-button button-flat
                                       material-icons"></button><a href="https://www.google.com/accounts/ServiceLogin?passive=true&continue=https%3A%2F%2Fcloud.google.com%2Fkms%2Fdocs%2Fdestroy-restore%3Frefresh%3D1&service=cloudconsole"
   class="devsite-user-signin devsite-top-button button gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Sign in button">
  
  Sign in
</a></div></div></div><div class="devsite-collapsible-section"><div class="devsite-header-background devsite-full-site-width"><div class="devsite-product-id-row devsite-full-site-width"><div class="devsite-product-description-row"><ul class="devsite-breadcrumb-list"><li class="devsite-breadcrumb-item">
    
    
    
      Documentation
    
    
  </li></ul></div><div class="devsite-product-button-row
            cloud-free-trial-eligible"><button type="button" id="devsite-feedback-project"
          class="devsite-feedback-button devsite-top-button gc-analytics-event"
          data-category="Site-Wide Custom Events" data-label="Send Feedback Button"
          track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="header">
  
  Send feedback
  </button><a
    
      href="https://console.cloud.google.com/freetrial"
    
    
      class="cloud-free-trial-button button-primary button"
    
    
      
      track-type="freeTrial"
      
      track-name="try"
      
      track-metadata-position="nav"
      
    >
    Try It Free
  </a><a
    
      href="https://cloud.google.com/contact/"
    
    
      class="cloud-contact-sales-button button"
    
    
      
      track-type="sales"
      
      track-name="contact"
      
      track-metadata-position="nav"
      
    >
    Contact Sales
  </a></div></div></div></div></header><script>
    if (window.jQuery) {
      $(document).ready(function() {
        if (window.devsite && window.devsite.search) {
          
          window.devsite.search.init('en')
        }
      });
    }
  </script></div><div id="gc-wrapper"itemscope itemtype="http://schema.org/Article"><input class="google-tag-manager-id" type="hidden" value="GTM-5CVQBG"><script>
      var dataLayer = [{"freeTrialEligibleUser": "True", "userCountry": "HK", "language": {"requested": "en", "served": "en"}, "projectName": "Cloud KMS Documentation", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>

      
        <div class="devsite-site-mask"></div>
        
  


<nav class="devsite-nav-responsive devsite-nav nocontent" tabindex="0">
  
  <div class="devsite-nav-responsive-tabs-panel">
    
      
        



<nav class="devsite-nav-responsive-tabs devsite-nav">
  <ul class="devsite-nav-list">
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://cloud.google.com/why-google/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Why Google">
        Why Google
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://cloud.google.com/products/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Products">
        Products
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://cloud.google.com/solutions/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Solutions">
        Solutions
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://cloud.google.com/launcher/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Launcher">
        Launcher
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://cloud.google.com/pricing/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Pricing">
        Pricing
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://cloud.google.com/customers/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Customers">
        Customers
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <span class="devsite-nav-responsive-forward devsite-nav-responsive-tab devsite-nav-title
                   devsite-nav-active gc-analytics-event"
            data-category="Site-Wide Custom Events" data-label="Responsive Tab: Documentation"
            tabindex="0">
        Documentation
      </span>
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://cloud.google.com/support/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Support">
        Support
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://cloud.google.com/partners/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Partners">
        Partners
      </a>
      
      
    
    </li>
  
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      <a href="//console.cloud.google.com/"
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
         data-label="Responsive Tab: console">
        Console
      </a>
    </li>
  
  </ul>
</nav>


      
    
  </div>
  
  
  <div class="devsite-nav-responsive-sidebar-panel">
    
    <div class="devsite-nav-responsive-back" tabindex="0"></div>
    
    <nav class="devsite-nav-responsive-sidebar"></nav>
  </div>
  
  
    <div class="devsite-nav-responsive-index-panel">
      <div class="devsite-nav-index-back" tabindex="0"></div>
      <nav>
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      </nav>
    </div>
  
</nav>


        <div class="devsite-main-content clearfix">

        
        

        
  
  
    
    
      
  <nav class="devsite-section-nav devsite-nav nocontent">
    <ul class="devsite-nav-list devsite-nav-expandable"><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Cloud KMS</span></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Product Overview</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Documentation</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/quickstart" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Quickstart</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">How-to Guides</span></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/how-tos" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">All How-to Guides</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/accessing-the-api" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Accessing the API</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/creating-keys" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Creating keys</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/enable-disable" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Enabling and disabling key versions</a></li><li class="devsite-nav-item devsite-nav-active"><a href="https://cloud.google.com/kms/docs/destroy-restore" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Destroying and restoring key versions</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/labeling-keys" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Labeling keys</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/rotating-keys" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Rotating keys</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/encrypt-decrypt" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Encrypting and decrypting</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/re-encrypt-data" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Re-encrypting data</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/store-secrets" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Storing secrets</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/iam" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Using IAM</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/logging" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Using Cloud Audit Logging</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/monitoring" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Using Stackdriver Monitoring</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Concepts</span></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/concepts" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">All Concepts</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/object-hierarchy" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Object hierarchy</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/key-states" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Key states</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/key-rotation" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Key rotation</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/separation-of-duties" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Separation of duties</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/secret-management" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Secret management</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/additional-authenticated-data" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Additional authenticated data</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/envelope-encryption" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Envelope encryption</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/locations" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Locations</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">APIs &amp; Reference</span></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/apis" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">All APIs &amp; References</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/libraries" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Client Libraries</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/permissions-and-roles" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Permissions and Roles</a></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink"track-metadata-position="0" aria-label="REST Reference, click to expand/collapse" role="link">REST Reference</span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Overview</a></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink"track-metadata-position="1" aria-label="v1, click to expand/collapse" role="link">v1</span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="1" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="2">REST Resources</span></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink"track-metadata-position="2" aria-label="projects.locations, click to expand/collapse" role="link">projects.locations</span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="2" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Overview</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations/get" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">get</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations/list" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">list</a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink"track-metadata-position="2" aria-label="projects.locations.keyRings, click to expand/collapse" role="link">projects.locations.keyRings</span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="2" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Overview</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings/create" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">create</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings/get" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">get</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings/getIamPolicy" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">getIamPolicy</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings/list" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">list</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings/setIamPolicy" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">setIamPolicy</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings/testIamPermissions" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">testIamPermissions</a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink"track-metadata-position="2" aria-label="projects.locations.keyRings.cryptoKeys, click to expand/collapse" role="link">projects.locations.keyRings.cryptoKeys</span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="2" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Overview</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/create" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">create</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/decrypt" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">decrypt</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/encrypt" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">encrypt</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/get" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">get</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/getIamPolicy" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">getIamPolicy</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/list" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">list</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/patch" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">patch</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/setIamPolicy" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">setIamPolicy</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/testIamPermissions" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">testIamPermissions</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys/updatePrimaryVersion" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">updatePrimaryVersion</a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink"track-metadata-position="2" aria-label="projects.locations.keyRings.cryptoKeys.cryptoKeyVersions, click to expand/collapse" role="link">projects.locations.keyRings.cryptoKeys.cryptoKeyVersions</span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="2" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys.cryptoKeyVersions" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Overview</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys.cryptoKeyVersions/create" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">create</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys.cryptoKeyVersions/destroy" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">destroy</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys.cryptoKeyVersions/get" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">get</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys.cryptoKeyVersions/list" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">list</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys.cryptoKeyVersions/patch" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">patch</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys.cryptoKeyVersions/restore" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="3" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">restore</a></li></ul></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="2">Types</span></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/Policy" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="2" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Policy</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/reference/rest/v1/TestIamPermissionsResponse" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="2" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TestIamPermissionsResponse</a></li></ul></li></ul></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Tutorials</span></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/tutorials" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">All Tutorials</a></li><li class="devsite-nav-item"><a href="https://codelabs.developers.google.com/codelabs/cloud-encrypt-with-kms/index.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Encrypting data at rest</a></li><li class="devsite-nav-item"><a href="https://codelabs.developers.google.com/codelabs/cloud-bookshelf-java-cloud-kms/index.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Encrypting a java application</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Resources</span></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/resources" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">All Resources</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/faq" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Frequently Asked Questions</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/pricing" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Pricing</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/quotas" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Quotas</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/release-notes" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Release notes</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/support" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Support</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/known-issues" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Known Issues</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/docs/restrictions" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Restrictions</a></li><li class="devsite-nav-item"><a href="https://cloud.google.com/kms/sla" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Service Level Agreement</a></li></ul>
  </nav>

    

    
  <nav class="devsite-page-nav devsite-nav"></nav>


      <article class="devsite-article">
        <article class="devsite-article-inner">
  
          
  



  
  <nav class="devsite-breadcrumb-nav devsite-nav">
    


<ul class="devsite-breadcrumb-list">
  
  <li class="devsite-breadcrumb-item">
    
    
    <a href="https://cloud.google.com/kms/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="1">
    
    
      Cloud KMS
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://cloud.google.com/kms/docs/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="2">
    
    
      Documentation
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://cloud.google.com/docs/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="3">
    
    
      Documentation
    
    
    </a>
    
  </li>
  
</ul>

  </nav>
  
  
  <h1 itemprop="name" class="devsite-page-title">
    Destroying and restoring key versions
  </h1>
  
  
  <nav class="devsite-page-nav-embedded devsite-nav"></nav>
  
  <div class="devsite-article-body clearfix
            "
       itemprop="articleBody">
    


<p>A key version has a <a href="https://cloud.google.com/kms/docs/key-states">state</a> which determines if its
key material exists.</p>
<p>A key version which is
enabled or disabled can move to scheduled for destruction using
<a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys.cryptoKeyVersions/destroy">DestroyCryptoKeyVersion</a>,
client library methods that map to <code>DestroyCryptoKeyVersion</code>,
<a href="https://cloud.google.com/sdk/gcloud/reference/kms/keys/versions/destroy"><code>gcloud kms keys versions destroy</code></a>,
or the Google Cloud Platform Console. A key version which is scheduled for destruction can move to disabled using
<a href="https://cloud.google.com/kms/docs/reference/rest/v1/projects.locations.keyRings.cryptoKeys.cryptoKeyVersions/restore">RestoreCryptoKeyVersion</a>,
client library methods that map to <code>RestoreCryptoKeyVersion</code>,
<a href="https://cloud.google.com/sdk/gcloud/reference/kms/keys/versions/restore"><code>gcloud kms keys versions restore</code></a>,
and the Google Cloud Platform Console.</p>
<aside class="note"><strong>Note:</strong><span> 
To prevent resource name collisions, key ring and key resources CANNOT be
deleted.  Key versions also cannot be deleted, but key version material can be
destroyed so that the resources can no longer be used. Key rings and keys do not
have billable costs or quota limitations, so their continued existence does not
impact costs or production limits.
</span></aside>
<p>To modify the state of a key version, a user needs the appropriate
<a href="https://cloud.google.com/kms/docs/iam">Cloud Identity and Access Management</a> role or permission.</p>
<ul>
<li>
<p>The <a href="https://cloud.google.com/kms/docs/reference/permissions-and-roles#predefined_roles">pre-defined roles</a>
<code>roles/cloudkms.admin</code> or <code>roles/owner</code> can schedule a
key version for destruction and can restore a key version that is
scheduled for destruction.</p>
</li>
<li>
<p>A <a href="https://cloud.google.com/kms/docs/reference/permissions-and-roles#custom_roles">custom role</a> that
contains the <code>cloudkms.cryptoKeyVersions.destroy</code> permission can schedule a
key version for destruction.</p>
</li>
<li>
<p>A <a href="https://cloud.google.com/kms/docs/reference/permissions-and-roles#custom_roles">custom role</a> that
contains the <code>cloudkms.cryptoKeyVersions.restore</code> permission can restore a
key version that is scheduled for destruction.</p>
</li>
</ul>
<h2 id="schedule_a_key_version_for_destruction_destroy_a_key_version">Schedule a key version for destruction (Destroy a key version)</h2>
<p>Only key versions which are enabled or disabled can be scheduled for
destruction.</p>
<p>To prevent accidents, and damage from malicious individuals, when
<code>DestroyCryptoKeyVersion</code> is used, the key material is NOT immediately
destroyed. Rather, the key version moves to scheduled for destruction for
24 hours, after which it is automatically destroyed. There is no way to override
this safety fallback.</p>
<p>Destruction is removal of the key material, but a record of the version still
exists (e.g., the version number cannot be reused). <strong>This is NOT reversible -
any data encrypted with this version will not be recoverable.</strong></p>



<div id="kms-destroy-cryptokey-version-code-sample" class="ds-selector-tabs" data-ds-scope="code-sample">
  







  


  
    
  


<section>
  
  <h3 id="kms-destroy-cryptokey-version-console" track-type="sampleTabNav" track-name="console" track-metadata-position="kms-destroy-cryptokey-version">Console</h3>
  
  
  
  
<ol>
<li>
<p>Go to the <strong>Cryptographic keys</strong> page in the GCP Console.<br>
<a class="button button-primary" href="https://console.cloud.google.com/security/kms" target="console">Go to the Cryptographic keys page</a><br></p>
</li>
<li>
<p>Click the name of the key ring that contains the key whose key version you
will schedule for destruction.</p>
</li>
<li>
<p>Click the key whose key version you want to schedule for destruction.</p>
</li>
<li>
<p>Click the key version that you want to schedule for destruction.</p>
</li>
<li>
<p>Click <strong>Destroy</strong>.</p>
</li>
<li>
<p>When prompted to confirm the scheduling of the key version for destruction,
enter the key name and then click <strong>Schedule Destruction</strong>.</p>
</li>
</ol>

</section>





  







  


  
    
  


<section>
  
  <h3 id="kms-destroy-cryptokey-version-cli" track-type="sampleTabNav" track-name="cli" track-metadata-position="kms-destroy-cryptokey-version">Command-line</h3>
  
  
  
  
Destroy version "42" of CryptoKey "answer" in KeyRing "answers"</p>
<pre class="notranslate prettyprint devsite-click-to-copy" suppresswarning="suppresswarning">
gcloud kms keys versions destroy 42 --location global --keyring answers --key answer
</pre>


</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-destroy-cryptokey-version-csharp" track-type="sampleTabNav" track-name="csharp" track-metadata-position="kms-destroy-cryptokey-version">C#</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="csharp" track-metadata-position="kms-destroy-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/dotnet-docs-samples/blob/2ec373efac86f3e589ff98ac8abf5d28b29b1578/kms/api/Program.cs"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/dotnet-docs-samples/blob/2ec373efac86f3e589ff98ac8abf5d28b29b1578/kms/api/Program.cs">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-destroy-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="csharp" track-metadata-position="kms-destroy-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint " track-metadata-position="GoogleCloudPlatform/dotnet-docs-samples/kms/api/Program.cs/2ec373efac86f3e589ff98ac8abf5d28b29b1578/kms_destroy_cryptokey_version">      public static object DestroyCryptoKeyVersion(string projectId, string locationId, string keyRingId, string cryptoKeyId, string versionId)
      {
          var cloudKms = CreateAuthorizedClient();
          // Generate the full path of the parent to use for destroying the crypto key Version.
          var parent = $&quot;projects/{projectId}/locations/{locationId}/keyRings/{keyRingId}/cryptoKeys/{cryptoKeyId}/cryptoKeyVersions/{versionId}&quot;;
          DestroyCryptoKeyVersionRequest destroyRequest = new DestroyCryptoKeyVersionRequest();
          // Destroy crypto key version.
          var request = new ProjectsResource.LocationsResource.KeyRingsResource.CryptoKeysResource
              .CryptoKeyVersionsResource.DestroyRequest(cloudKms, destroyRequest, parent);
          var result = request.Execute();
          Console.Write($&quot;Destroyed Crypto Key Version: {result.Name}&quot;);
          return 0;
      }</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-destroy-cryptokey-version-go" track-type="sampleTabNav" track-name="go" track-metadata-position="kms-destroy-cryptokey-version">Go</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="go" track-metadata-position="kms-destroy-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/golang-samples/blob/master/kms/snippets/snippet_test.go"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/golang-samples/blob/master/kms/snippets/snippet_test.go">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-destroy-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="go" track-metadata-position="kms-destroy-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-go" track-metadata-position="GoogleCloudPlatform/golang-samples/kms/snippets/snippet_test.go/master/((?:\n//[^\n]*)*?\nfunc[^\n]*? destroyCryptoKeyVersion\(.+?\n})">
func destroyCryptoKeyVersion(project, keyRing, key, version string) error {
	ctx := context.Background()
	authedClient, err := google.DefaultClient(ctx, cloudkms.CloudPlatformScope)
	if err != nil {
		return err
	}
	client, err := cloudkms.New(authedClient)
	if err != nil {
		return err
	}
	location := &quot;global&quot;
	parent := fmt.Sprintf(&quot;projects/%s/locations/%s/keyRings/%s/cryptoKeyVersions/%s&quot;,
		project, location, keyRing, version)

	_, err = client.Projects.Locations.KeyRings.CryptoKeys.CryptoKeyVersions.Destroy(
		parent, &amp;cloudkms.DestroyCryptoKeyVersionRequest{}).Do()
	if err != nil {
		return err
	}
	log.Print(&quot;Destroyed crypto key version.&quot;)

	return nil
}</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-destroy-cryptokey-version-java" track-type="sampleTabNav" track-name="java" track-metadata-position="kms-destroy-cryptokey-version">Java</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="java" track-metadata-position="kms-destroy-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/kms/src/main/java/com/example/Snippets.java"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/kms/src/main/java/com/example/Snippets.java">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-destroy-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="java" track-metadata-position="kms-destroy-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-java" track-metadata-position="GoogleCloudPlatform/java-docs-samples/kms/src/main/java/com/example/Snippets.java/master/kms_destroy_cryptokey_version">
/**
 * Marks the given version of a crypto key to be destroyed at a scheduled future point.
 */
public static CryptoKeyVersion destroyCryptoKeyVersion(
    String projectId, String locationId, String keyRingId, String cryptoKeyId, String version)
    throws IOException {
  // Create the Cloud KMS client.
  CloudKMS kms = createAuthorizedClient();

  // The resource name of the cryptoKey version
  String cryptoKeyVersion = String.format(
      &quot;projects/%s/locations/%s/keyRings/%s/cryptoKeys/%s/cryptoKeyVersions/%s&quot;,
      projectId, locationId, keyRingId, cryptoKeyId, version);

  DestroyCryptoKeyVersionRequest destroyRequest = new DestroyCryptoKeyVersionRequest();

  CryptoKeyVersion destroyed = kms.projects().locations().keyRings().cryptoKeys()
      .cryptoKeyVersions()
      .destroy(cryptoKeyVersion, destroyRequest)
      .execute();

  System.out.println(destroyed);
  return destroyed;
}</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-destroy-cryptokey-version-nodejs" track-type="sampleTabNav" track-name="nodejs" track-metadata-position="kms-destroy-cryptokey-version">Node.js</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="nodejs" track-metadata-position="kms-destroy-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/master/kms/keys.js"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/master/kms/keys.js">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-destroy-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="nodejs" track-metadata-position="kms-destroy-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-js" track-metadata-position="GoogleCloudPlatform/nodejs-docs-samples/kms/keys.js/master/kms_destroy_cryptokey_version">// Your Google Cloud Platform project ID
// const projectId = &#39;YOUR_PROJECT_ID&#39;;

// The location of the crypto key versions&#39;s key ring, e.g. &quot;global&quot;
// const locationId = &#39;global&#39;;

// The name of the crypto key version&#39;s key ring, e.g. &quot;my-key-ring&quot;
// const keyRingId = &#39;my-key-ring&#39;;

// The name of the version&#39;s crypto key, e.g. &quot;my-key&quot;
// const cryptoKeyId = &#39;my-key&#39;;

// The version&#39;s id, e.g. 123
// const version = 123;

// Builds and authorizes a Cloud KMS client
buildAndAuthorizeService((err, cloudkms) =&gt; {
  if (err) {
    console.log(err);
    return;
  }

  const request = {
    // This will be a path parameter in the request URL
    name: `projects/${projectId}/locations/${locationId}/keyRings/${keyRingId}/cryptoKeys/${cryptoKeyId}/cryptoKeyVersions/${version}`
  };

  // Destroys a crypto key version
  cloudkms.projects.locations.keyRings.cryptoKeys.cryptoKeyVersions.destroy(request, (err, response) =&gt; {
    if (err) {
      console.log(err);
      return;
    }

    console.log(`Crypto key version ${response.data.name} destroyed.`);
  });
});

function buildAndAuthorizeService (callback) {
  // Imports the Google APIs client library
  const google = require(&#39;googleapis&#39;).google;

  // Acquires credentials
  google.auth.getApplicationDefault((err, authClient) =&gt; {
    if (err) {
      callback(err);
      return;
    }

    if (authClient.createScopedRequired &amp;&amp; authClient.createScopedRequired()) {
      authClient = authClient.createScoped([
        &#39;https://www.googleapis.com/auth/cloud-platform&#39;
      ]);
    }

    // Instantiates an authorized client
    const cloudkms = google.cloudkms({
      version: &#39;v1&#39;,
      auth: authClient
    });

    callback(null, cloudkms);
  });
}</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-destroy-cryptokey-version-php" track-type="sampleTabNav" track-name="php" track-metadata-position="kms-destroy-cryptokey-version">PHP</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="php" track-metadata-position="kms-destroy-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/php-docs-samples/blob/master/kms/src/functions.php"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/php-docs-samples/blob/master/kms/src/functions.php">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-destroy-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="php" track-metadata-position="kms-destroy-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-php" track-metadata-position="GoogleCloudPlatform/php-docs-samples/kms/src/functions.php/master/kms_destroy_cryptokey_version">/**
 * Destroy a CryptoKey version.
 *
 * @param string $projectId
 * @param string $keyRingId
 * @param string $cryptoKeyId
 * @param string $version
 * @param string $locationId [optional]
 * @return Google_Service_CloudKMS_CryptoKeyVersion
 */
function destroy_cryptokey_version($projectId, $keyRingId, $cryptoKeyId, $version, $locationId = &#39;global&#39;)
{
    // Instantiate the client, authenticate, and add scopes.
    $client = new Google_Client();
    $client-&gt;useApplicationDefaultCredentials();
    $client-&gt;addScope(&#39;https://www.googleapis.com/auth/cloud-platform&#39;);

    // Create the Cloud KMS client.
    $kms = new Google_Service_CloudKMS($client);

    // The resource name of the CryptoKey version.
    $parent = sprintf(&#39;projects/%s/locations/%s/keyRings/%s/cryptoKeys/%s/cryptoKeyVersions/%s&#39;,
        $projectId,
        $locationId,
        $keyRingId,
        $cryptoKeyId,
        $version
    );

    // Destroy the CryptoKey version.
    $request = new Google_Service_CloudKMS_DestroyCryptoKeyVersionRequest();
    $kms-&gt;projects_locations_keyRings_cryptoKeys_cryptoKeyVersions-&gt;destroy(
        $parent,
        $request
    );

    printf(&#39;Destroyed version %s for cryptoKey %s in keyRing %s&#39; . PHP_EOL, $version, $cryptoKeyId, $keyRingId);
}</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-destroy-cryptokey-version-python" track-type="sampleTabNav" track-name="python" track-metadata-position="kms-destroy-cryptokey-version">Python</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="python" track-metadata-position="kms-destroy-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/python-docs-samples/blob/master/kms/api-client/snippets.py"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/python-docs-samples/blob/master/kms/api-client/snippets.py">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-destroy-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="python" track-metadata-position="kms-destroy-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-py" track-metadata-position="GoogleCloudPlatform/python-docs-samples/kms/api-client/snippets.py/master/kms_destroy_cryptokey_version">def destroy_crypto_key_version(
        project_id, location_id, key_ring_id, crypto_key_id, version_id):
    &quot;&quot;&quot;Schedules a CryptoKeyVersion associated with a given CryptoKey and
    KeyRing for destruction 24 hours in the future.&quot;&quot;&quot;

    # Creates an API client for the KMS API.
    kms_client = googleapiclient.discovery.build(&#39;cloudkms&#39;, &#39;v1&#39;)

    # Construct the resource name of the CryptoKeyVersion.
    name = (
        &#39;projects/{}/locations/{}/keyRings/{}/cryptoKeys/{}/&#39;
        &#39;cryptoKeyVersions/{}&#39;
        .format(
            project_id, location_id, key_ring_id, crypto_key_id, version_id))

    # Use the KMS API to schedule the CryptoKeyVersion for destruction.
    crypto_keys = kms_client.projects().locations().keyRings().cryptoKeys()
    request = crypto_keys.cryptoKeyVersions().destroy(name=name, body={})
    response = request.execute()

    print(&#39;CryptoKeyVersion {}\&#39;s state has been set to {}.&#39;.format(
        name, response[&#39;state&#39;]))</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-destroy-cryptokey-version-ruby" track-type="sampleTabNav" track-name="ruby" track-metadata-position="kms-destroy-cryptokey-version">Ruby</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="ruby" track-metadata-position="kms-destroy-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/ruby-docs-samples/blob/master/kms/kms.rb"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/ruby-docs-samples/blob/master/kms/kms.rb">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-destroy-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="ruby" track-metadata-position="kms-destroy-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-rb" track-metadata-position="GoogleCloudPlatform/ruby-docs-samples/kms/kms.rb/master/kms_destroy_cryptokey_version"># project_id    = &quot;Your Google Cloud project ID&quot;
# location_id   = &quot;The location of the key ring&quot;
# key_ring_id   = &quot;The ID of the key ring&quot;
# crypto_key_id = &quot;The ID of the crypto key&quot;
# version_id    = &quot;Version of the crypto key&quot;

require &quot;google/apis/cloudkms_v1&quot;

# Initialize the client and authenticate with the specified scope
Cloudkms = Google::Apis::CloudkmsV1
kms_client = Cloudkms::CloudKMSService.new
kms_client.authorization = Google::Auth.get_application_default(
  &quot;https://www.googleapis.com/auth/cloud-platform&quot;
)

# The resource name of the crypto key version
resource = &quot;projects/#{project_id}/locations/#{location_id}/&quot; +
           &quot;keyRings/#{key_ring_id}/cryptoKeys/#{crypto_key_id}/&quot; +
           &quot;cryptoKeyVersions/#{version_id}&quot;

# Destroy specific version of the crypto key
kms_client.destroy_crypto_key_version(
  resource,
  Cloudkms::DestroyCryptoKeyVersionRequest.new
)

puts &quot;Destroyed version #{version_id} of #{crypto_key_id}&quot;</pre>
</div>





















  
</section>





</div></p>
<p>For an example of how to receive an alert when a key version is scheduled
for destruction, see
<a href="https://cloud.google.com/kms/docs/monitoring">Using Stackdriver Monitoring with Cloud KMS</a>.</p>
<h2 id="restore_a_key_version">Restore a key version</h2>
<p>A key version which is scheduled for destruction can be restored, so
that it is not automatically destroyed. This moves the key version from
scheduled for destruction to disabled.</p>



<div id="kms-restore-cryptokey-version-code-sample" class="ds-selector-tabs" data-ds-scope="code-sample">
  







  


  
    
  


<section>
  
  <h3 id="kms-restore-cryptokey-version-console" track-type="sampleTabNav" track-name="console" track-metadata-position="kms-restore-cryptokey-version">Console</h3>
  
  
  
  
<ol>
<li>
<p>Go to the <strong>Cryptographic keys</strong> page in the GCP Console.<br>
<a class="button button-primary" href="https://console.cloud.google.com/security/kms" target="console">Go to the Cryptographic keys page</a><br></p>
</li>
<li>
<p>Click the name of the key ring that contains the key whose key version you
want to restore.</p>
</li>
<li>
<p>Click the key whose key version you want to restore.</p>
</li>
<li>
<p>Click the key version that you want to restore.</p>
</li>
<li>
<p>Click <strong>Restore</strong>.</p>
</li>
<li>
<p>When prompted to confirm restoration of the key version, click <strong>Restore</strong>.

</section>





  







  


  
    
  


<section>
  
  <h3 id="kms-restore-cryptokey-version-cli" track-type="sampleTabNav" track-name="cli" track-metadata-position="kms-restore-cryptokey-version">Command-line</h3>
  
  
  
  
Restore version "42" of CryptoKey "answer" in KeyRing "answers"</p>
</li>
</ol>
<pre class="notranslate prettyprint devsite-click-to-copy" suppresswarning="suppresswarning">
gcloud kms keys versions restore 42 --location global --keyring answers --key answer
</pre>


</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-restore-cryptokey-version-csharp" track-type="sampleTabNav" track-name="csharp" track-metadata-position="kms-restore-cryptokey-version">C#</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="csharp" track-metadata-position="kms-restore-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/dotnet-docs-samples/blob/2ec373efac86f3e589ff98ac8abf5d28b29b1578/kms/api/Program.cs"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/dotnet-docs-samples/blob/2ec373efac86f3e589ff98ac8abf5d28b29b1578/kms/api/Program.cs">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-restore-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="csharp" track-metadata-position="kms-restore-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint " track-metadata-position="GoogleCloudPlatform/dotnet-docs-samples/kms/api/Program.cs/2ec373efac86f3e589ff98ac8abf5d28b29b1578/kms_restore_cryptokey_version">      public static object RestoreCryptoKeyVersion(string projectId, string locationId, string keyRingId, string cryptoKeyId, string versionId)
      {
          var cloudKms = CreateAuthorizedClient();
          // Generate the full path of the parent to use for restoring the crypto key Version.
          var parent = $&quot;projects/{projectId}/locations/{locationId}/keyRings/{keyRingId}/cryptoKeys/{cryptoKeyId}/cryptoKeyVersions/{versionId}&quot;;
          RestoreCryptoKeyVersionRequest restoreRequest = new RestoreCryptoKeyVersionRequest();
          // Restore crypto key version.
          var request = new ProjectsResource.LocationsResource.KeyRingsResource.CryptoKeysResource
              .CryptoKeyVersionsResource.RestoreRequest(cloudKms, restoreRequest, parent);
          var result = request.Execute();
          Console.Write($&quot;Restored Crypto Key Version: {result.Name}&quot;);
          return 0;
      }</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-restore-cryptokey-version-go" track-type="sampleTabNav" track-name="go" track-metadata-position="kms-restore-cryptokey-version">Go</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="go" track-metadata-position="kms-restore-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/golang-samples/blob/master/kms/snippets/snippet_test.go"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/golang-samples/blob/master/kms/snippets/snippet_test.go">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-restore-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="go" track-metadata-position="kms-restore-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-go" track-metadata-position="GoogleCloudPlatform/golang-samples/kms/snippets/snippet_test.go/master/((?:\n//[^\n]*)*?\nfunc[^\n]*? restoreCryptoKeyVersion\(.+?\n})">
func restoreCryptoKeyVersion(project, keyRing, key, version string) error {
	ctx := context.Background()
	authedClient, err := google.DefaultClient(ctx, cloudkms.CloudPlatformScope)
	if err != nil {
		return err
	}
	client, err := cloudkms.New(authedClient)
	if err != nil {
		return err
	}
	location := &quot;global&quot;
	parent := fmt.Sprintf(&quot;projects/%s/locations/%s/keyRings/%s/cryptoKeyVersions/%s&quot;,
		project, location, keyRing, version)

	_, err = client.Projects.Locations.KeyRings.CryptoKeys.CryptoKeyVersions.Restore(
		parent, &amp;cloudkms.RestoreCryptoKeyVersionRequest{}).Do()
	if err != nil {
		return err
	}
	log.Print(&quot;Restored crypto key version.&quot;)

	return nil
}</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-restore-cryptokey-version-java" track-type="sampleTabNav" track-name="java" track-metadata-position="kms-restore-cryptokey-version">Java</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="java" track-metadata-position="kms-restore-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/kms/src/main/java/com/example/Snippets.java"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/kms/src/main/java/com/example/Snippets.java">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-restore-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="java" track-metadata-position="kms-restore-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-java" track-metadata-position="GoogleCloudPlatform/java-docs-samples/kms/src/main/java/com/example/Snippets.java/master/kms_restore_cryptokey_version">
/**
 * Restores the given version of a crypto key that is currently scheduled for destruction.
 */
public static CryptoKeyVersion restoreCryptoKeyVersion(
    String projectId, String locationId, String keyRingId, String cryptoKeyId, String version)
    throws IOException {
  // Create the Cloud KMS client.
  CloudKMS kms = createAuthorizedClient();

  // The resource name of the cryptoKey version
  String cryptoKeyVersion = String.format(
      &quot;projects/%s/locations/%s/keyRings/%s/cryptoKeys/%s/cryptoKeyVersions/%s&quot;,
      projectId, locationId, keyRingId, cryptoKeyId, version);

  RestoreCryptoKeyVersionRequest restoreRequest = new RestoreCryptoKeyVersionRequest();

  CryptoKeyVersion restored = kms.projects().locations().keyRings().cryptoKeys()
      .cryptoKeyVersions()
      .restore(cryptoKeyVersion, restoreRequest)
      .execute();

  System.out.println(restored);
  return restored;
}</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-restore-cryptokey-version-nodejs" track-type="sampleTabNav" track-name="nodejs" track-metadata-position="kms-restore-cryptokey-version">Node.js</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="nodejs" track-metadata-position="kms-restore-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/master/kms/keys.js"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/master/kms/keys.js">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-restore-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="nodejs" track-metadata-position="kms-restore-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-js" track-metadata-position="GoogleCloudPlatform/nodejs-docs-samples/kms/keys.js/master/kms_restore_cryptokey_version">// Your Google Cloud Platform project ID
// const projectId = &#39;YOUR_PROJECT_ID&#39;;

// The location of the crypto key versions&#39;s key ring, e.g. &quot;global&quot;
// const locationId = &#39;global&#39;;

// The name of the crypto key version&#39;s key ring, e.g. &quot;my-key-ring&quot;
// const keyRingId = &#39;my-key-ring&#39;;

// The name of the version&#39;s crypto key, e.g. &quot;my-key&quot;
// const cryptoKeyId = &#39;my-key&#39;;

// The version&#39;s id, e.g. 123
// const version = 123;

// Builds and authorizes a Cloud KMS client
buildAndAuthorizeService((err, cloudkms) =&gt; {
  if (err) {
    console.log(err);
    return;
  }

  const request = {
    // This will be a path parameter in the request URL
    name: `projects/${projectId}/locations/${locationId}/keyRings/${keyRingId}/cryptoKeys/${cryptoKeyId}/cryptoKeyVersions/${version}`
  };

  // Restores a crypto key version
  cloudkms.projects.locations.keyRings.cryptoKeys.cryptoKeyVersions.restore(request, (err, response) =&gt; {
    if (err) {
      console.log(err);
      return;
    }

    console.log(`Crypto key version ${response.data.name} restored.`);
  });
});

function buildAndAuthorizeService (callback) {
  // Imports the Google APIs client library
  const google = require(&#39;googleapis&#39;).google;

  // Acquires credentials
  google.auth.getApplicationDefault((err, authClient) =&gt; {
    if (err) {
      callback(err);
      return;
    }

    if (authClient.createScopedRequired &amp;&amp; authClient.createScopedRequired()) {
      authClient = authClient.createScoped([
        &#39;https://www.googleapis.com/auth/cloud-platform&#39;
      ]);
    }

    // Instantiates an authorized client
    const cloudkms = google.cloudkms({
      version: &#39;v1&#39;,
      auth: authClient
    });

    callback(null, cloudkms);
  });
}</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-restore-cryptokey-version-php" track-type="sampleTabNav" track-name="php" track-metadata-position="kms-restore-cryptokey-version">PHP</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="php" track-metadata-position="kms-restore-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/php-docs-samples/blob/master/kms/src/functions.php"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/php-docs-samples/blob/master/kms/src/functions.php">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-restore-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="php" track-metadata-position="kms-restore-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-php" track-metadata-position="GoogleCloudPlatform/php-docs-samples/kms/src/functions.php/master/kms_restore_cryptokey_version">/**
 * Restore a CryptoKey version.
 *
 * @param string $projectId
 * @param string $keyRingId
 * @param string $cryptoKeyId
 * @param string $version
 * @param string $locationId [optional]
 * @return Google_Service_CloudKMS_CryptoKeyVersion
 */
function restore_cryptokey_version($projectId, $keyRingId, $cryptoKeyId, $version, $locationId = &#39;global&#39;)
{
    // Instantiate the client, authenticate, and add scopes.
    $client = new Google_Client();
    $client-&gt;useApplicationDefaultCredentials();
    $client-&gt;addScope(&#39;https://www.googleapis.com/auth/cloud-platform&#39;);

    // Create the Cloud KMS client.
    $kms = new Google_Service_CloudKMS($client);

    // The resource name of the CryptoKey version.
    $parent = sprintf(&#39;projects/%s/locations/%s/keyRings/%s/cryptoKeys/%s/cryptoKeyVersions/%s&#39;,
        $projectId,
        $locationId,
        $keyRingId,
        $cryptoKeyId,
        $version
    );

    // Restore the CryptoKey version.
    $request = new Google_Service_CloudKMS_RestoreCryptoKeyVersionRequest();
    $kms-&gt;projects_locations_keyRings_cryptoKeys_cryptoKeyVersions-&gt;restore(
        $parent,
        $request
    );

    printf(&#39;Restored version %s for cryptoKey %s in keyRing %s&#39; . PHP_EOL, $version, $cryptoKeyId, $keyRingId);
}</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-restore-cryptokey-version-python" track-type="sampleTabNav" track-name="python" track-metadata-position="kms-restore-cryptokey-version">Python</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="python" track-metadata-position="kms-restore-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/python-docs-samples/blob/master/kms/api-client/snippets.py"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/python-docs-samples/blob/master/kms/api-client/snippets.py">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-restore-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="python" track-metadata-position="kms-restore-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-py" track-metadata-position="GoogleCloudPlatform/python-docs-samples/kms/api-client/snippets.py/master/kms_restore_cryptokey_version">def restore_crypto_key_version(
        project_id, location_id, key_ring_id, crypto_key_id, version_id):
    &quot;&quot;&quot;Restores a CryptoKeyVersion that is scheduled for destruction.&quot;&quot;&quot;

    # Creates an API client for the KMS API.
    kms_client = googleapiclient.discovery.build(&#39;cloudkms&#39;, &#39;v1&#39;)

    # Construct the resource name of the CryptoKeyVersion.
    name = (
        &#39;projects/{}/locations/{}/keyRings/{}/cryptoKeys/{}/&#39;
        &#39;cryptoKeyVersions/{}&#39;
        .format(
            project_id, location_id, key_ring_id, crypto_key_id, version_id))

    # Use the KMS API to restore the CryptoKeyVersion.
    crypto_keys = kms_client.projects().locations().keyRings().cryptoKeys()
    request = crypto_keys.cryptoKeyVersions().restore(name=name, body={})
    response = request.execute()

    print(&#39;CryptoKeyVersion {}\&#39;s state has been set to {}.&#39;.format(
        name, response[&#39;state&#39;]))</pre>
</div>





















  
</section>





  







  


  
    
  


  

<section>
  
  <h3 id="kms-restore-cryptokey-version-ruby" track-type="sampleTabNav" track-name="ruby" track-metadata-position="kms-restore-cryptokey-version">Ruby</h3>
  
  
    
    <p>
      For more on installing and creating a Cloud KMS client, refer to
      <a href="https://cloud.google.com/kms/docs/reference/libraries" track-type="clientLibrariesReference"
         track-name="ruby" track-metadata-position="kms-restore-cryptokey-version">Cloud KMS Client Libraries</a>.
    </p>
    
  
  
  
  


















  
  
  
  


<!-- Header -->

<div class="github-docwidget-include" style="border: 1px solid #ddd; border-bottom: 0; padding: 4px; background-color: #4285f4; margin-bottom: -10px">
  

  
  <div style="text-align: right; float: right;">
    
    
      
      <a class="button" target="_blank" href="https://github.com/GoogleCloudPlatform/ruby-docs-samples/blob/master/kms/kms.rb"
      track-type="github" track-name="gitHubViewButton"
      track-metadata-link-destination="https://github.com/GoogleCloudPlatform/ruby-docs-samples/blob/master/kms/kms.rb">View on GitHub</a>
    
    
    
    
    
    
    
    <a href="#" class="button google-feedback" data-p="1634365" data-b="solutions"
       data-context="kms-restore-cryptokey-version" track-type="feedback" track-name="sampleFeedback"
       track-metadata-lang="ruby" track-metadata-position="kms-restore-cryptokey-version">Feedback</a>
    
  </div>
  

  <div style="clear: both;"></div>

</div>


<!-- Code -->
<div class="github-docwidget-gitinclude-code">

  
  

<pre class="prettyprint lang-rb" track-metadata-position="GoogleCloudPlatform/ruby-docs-samples/kms/kms.rb/master/kms_restore_cryptokey_version"># project_id    = &quot;Your Google Cloud project ID&quot;
# location_id   = &quot;The location of the key ring&quot;
# key_ring_id   = &quot;The ID of the key ring&quot;
# crypto_key_id = &quot;The ID of the crypto key&quot;
# version_id    = &quot;Version of the crypto key&quot;

require &quot;google/apis/cloudkms_v1&quot;

# Initialize the client and authenticate with the specified scope
Cloudkms = Google::Apis::CloudkmsV1
kms_client = Cloudkms::CloudKMSService.new
kms_client.authorization = Google::Auth.get_application_default(
  &quot;https://www.googleapis.com/auth/cloud-platform&quot;
)

# The resource name of the crypto key version
resource = &quot;projects/#{project_id}/locations/#{location_id}/&quot; +
           &quot;keyRings/#{key_ring_id}/cryptoKeys/#{crypto_key_id}/&quot; +
           &quot;cryptoKeyVersions/#{version_id}&quot;

# Restore specific version of the crypto key
kms_client.restore_crypto_key_version(
  resource,
  Cloudkms::RestoreCryptoKeyVersionRequest.new
)

puts &quot;Restored version #{version_id} of #{crypto_key_id}&quot;</pre>
</div>





















  
</section>





</div></p>


  </div>
  
    



  

  
        
  







        
<div class="devsite-content-footer nocontent">
  
  
    <p>Except as otherwise noted, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="https://developers.google.com/terms/site-policies">Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  

  
    
    <p class="devsite-content-footer-date" itemprop="datePublished"
       content="2018-04-11T16:20:17.097860">
      
      Last updated April 11, 2018.
    </p>
  

</div>

        </article>
      </article>
  

        </div>
      

<footer class="devsite-footer-linkboxes nocontent
               devsite-footer-linkboxes-all-backup
               devsite-footer-linkboxes-with-sites"><nav class="devsite-full-site-width"><ul class="devsite-footer-linkboxes-list"><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Products</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/products/compute/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Compute">
                Compute
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/products/storage/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Storage">
                Storage
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/products/networking/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Networking">
                Networking
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/products/big-data/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Big Data">
                Big Data
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/products/machine-learning/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Machine Learning">
                Machine Learning
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/products/#management" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Management Tools">
                Management Tools
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/products/tools/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Developer Tools">
                Developer Tools
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/products/#identity-security" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Identity and Security">
                Identity &amp; Security
            </a></li><li class="devsite-footer-linkbox-item"><a href="//status.cloud.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer System Status">
                System Status
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Learn More</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/why-google/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Why Google">
                Why Google Cloud
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/pricing/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Pricing">
                Pricing
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/docs/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Documentation">
                Documentation
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/docs/tutorials/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Tutorials">
                Tutorials
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/training/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Training">
                Training
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/solutions/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Solutions">
                Solutions
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/security/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Security &amp; Compliance">
                Security &amp; Compliance
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/partners/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Partners">
                Partners
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/customers/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Customers">
                Customers
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/support/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Support">
                Support
            </a></li><li class="devsite-footer-linkbox-item"><a href="//careers.google.com/cloud/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Careers">
                Careers
            </a></li><li class="devsite-footer-linkbox-item"><a href="//www.google.com/cloud/press" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Press">
                Press
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Engage</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/free-trial/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Free Trial Sign Up">
                Free Trial Sign Up
            </a></li><li class="devsite-footer-linkbox-item"><a href="//cloudplatform.googleblog.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Blog">
                Blog
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/community/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Community">
                Community
            </a></li><li class="devsite-footer-linkbox-item"><a href="//plus.google.com/+googlecloudplatform" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google+">
                Google+
            </a></li><li class="devsite-footer-linkbox-item"><a href="//twitter.com/gcpcloud" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Twitter">
                Twitter
            </a></li><li class="devsite-footer-linkbox-item"><a href="//www.linkedin.com/showcase/google-cloud" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer LinkedIn">
                LinkedIn
            </a></li><li class="devsite-footer-linkbox-item"><a href="//stackoverflow.com/questions/tagged/google-cloud-platform" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Stack Overflow">
                Stack Overflow
            </a></li><li class="devsite-footer-linkbox-item"><a href="//www.youtube.com/googlecloudplatform" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer YouTube">
                YouTube
            </a></li><li class="devsite-footer-linkbox-item"><a href="//www.gcppodcast.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Podcast">
                Podcast
            </a></li><li class="devsite-footer-linkbox-item"><a href="//cloud.google.com/newsletter/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Newsletter Signup">
                Newsletter Signup
            </a></li><li class="devsite-footer-linkbox-item"><a href="//cloud.google.com/usability" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer UX Research">
                UX Research
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-sites"><a href="https://developers.google.com/"
           class="gc-analytics-event devsite-footer-linkbox-logo-link"
           data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link"><img class="devsite-footer-linkbox-logo"
               src="https://cloud.google.com/_static/d7147bb846/images/redesign-14/lockup-color-knockout.png"
               alt="Google Developers"></a><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="//developer.android.com/index.html" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Android Link">
                Android
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developer.chrome.com/home" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Chrome Link">
                Chrome
            </a></li><li class="devsite-footer-linkbox-item"><a href="//firebase.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Firebase Link">
                Firebase
            </a></li><li class="devsite-footer-linkbox-item"><a href="//cloud.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Cloud Link">
                Google Cloud Platform
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/products/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Products Link">
                All Products
            </a></li></ul></li></ul></nav></footer><footer class="devsite-utility-footer"><nav class="devsite-utility-footer-nav devsite-nav devsite-full-site-width"><div class="devsite-utility-footer-nav-left"><form class="devsite-utility-footer-language" action="/i18n/setlang/" method="post"><input type="hidden" name="xsrf_token" value="hA1S9yL9qcKto8euEJOv50eMA-1dkhNgrGLg9cRhtQU6MTUyNDQ2MDQ4OTAzMTQ0MA" /><input type="hidden" name="next" value="/kms/docs/destroy-restore"><select class="devsite-utility-footer-language-select kd-select" name="language"
                track-type="languageSelector" track-name="click"><option value="de"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="de">
            Deutsch
          </option><option value="en"
                 selected="selected" 
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="en">
            English
          </option><option value="es"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="es">
            español
          </option><option value="pt-br"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="pt-br">
            Português Brasileiro
          </option><option value="ja"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="ja">
            日本語
          </option><option value="zh-tw"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="zh-tw">
            繁體中文
          </option></select></form><span class="devsite-utility-footer-links"><a class="devsite-utility-footer-link gc-analytics-event"
           href="https://cloud.google.com/terms/"
           data-category="Site-Wide Custom Events"
           data-label="Footer terms link"
           data-footer-link-id="terms"
           >Terms
         </a><a class="devsite-utility-footer-link gc-analytics-event"
           href="//www.google.com/policies/privacy/"
           data-category="Site-Wide Custom Events"
           data-label="Footer privacy link"
           data-footer-link-id="privacy"
           >Privacy
         </a><a class="devsite-utility-footer-link gc-analytics-event"
           href="//www.google.de/contact/impressum.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer impressum link"
           data-footer-link-id="impressum"
           >Impressum
         </a></span></div></nav></footer><div class="devsite-feedback-dialog devsite-dialog"><div class="devsite-dialog-contents"><h3>Send feedback about...</h3><div class="devsite-feedback-item"><a data-type="documentation" class="gc-analytics-event"
           data-category="Site-Wide Custom Events" data-label="Docs Feedback Image"
           track-type="feedback" track-name="feedbackDocIcon" track-metadata-position="header"><div class="devsite-feedback-item-icon-container"><div class="devsite-feedback-item-icon-white devsite-feedback-item-icon-docs
                        material-icons"></div></div></a><div class="devsite-feedback-item-name">
          
          This page
        </div><div class="devsite-feedback-item-description"><a data-type="documentation" tabindex="0" class="gc-analytics-event"
             data-category="Site-Wide Custom Events" data-label="Docs Feedback Text"
             track-type="feedback" track-name="feedbackDocText" track-metadata-position="header">
            
            Documentation feedback
          </a></div></div><div class="devsite-feedback-item"><a data-type="product" tabindex="0" class="gc-analytics-event"
           data-category="Site-Wide Custom Events" data-label="Product Feedback Image"
           track-type="feedback" track-name="feedbackProductIcon" track-metadata-position="header"
         ><img class="devsite-feedback-item-icon"
               src="https://cloud.google.com/_static/d7147bb846/images/feedback/google_56px.svg"></a><div class="devsite-feedback-item-name">
        Cloud KMS Documentation
        </div><div class="devsite-feedback-item-description"><a data-type="product" tabindex="0" class="gc-analytics-event"
             data-category="Site-Wide Custom Events" data-label="Product Feedback Text"
             track-type="feedback" track-name="feedbackProductText" track-metadata-position="header"
           >
            
            Product feedback
          </a></div></div></div><div class="devsite-dialog-buttons"><button type="button" class="devsite-feedback-cancel button-white gc-analytics-event"
              data-category="Site-Wide Custom Events" data-label="Cancel Feedback Button"
              track-type="feedback" track-name="cancelFeedbackButton"
              track-metadata-position="header">
        
        Cancel
      </button></div></div><script>
  $(document).ready(function() {
    new devsite.feedback.Widget({
        'product_id': '83405',
        'bucket': '',
        'context': '',
        'version': 'devsite-20180420-r00-rc00.default'
      },
      document.querySelectorAll('.devsite-feedback-button'),
      'en',
      document.querySelector('.devsite-site-mask'),
      document.querySelector('.devsite-feedback-dialog'),
      document.querySelector('.devsite-feedback-cancel'),
      document.querySelectorAll('.devsite-feedback-item a:not([href])')
    );
  });
  </script></div><script async defer src="//www.gstatic.com/feedback/api.js"></script><script src="https://cloud.google.com/_static2/d7147bb846/jsi18n/"></script><script src="https://cloud.google.com/_static/d7147bb846/js/script_foot_closure.js"></script><script src="https://cloud.google.com/_static/d7147bb846/js/script_foot.js"></script><script>
        (function($) {
          
          devsite.devsite.Init($, {'ENABLE_BLOCKED_VIDEO_PLACEHOLDER': 0, 'SITE_NAME': 'cloud', 'FULL_SITE_SEARCH_ENABLED': 1, 'ENABLE_CLOUDTRACK': 1, 'VTAGS_ENABLED': 1, 'HISTORY_ENABLED': 1, 'VERSION_HASH': 'd7147bb846', 'SCRIPTSAFE_DOMAIN': 'cloud-dot-google-developers.appspot.com', 'ENABLE_BLOCKED_LINK_TOOLTIP': 0, 'ALLOWED_HOSTS': ['.android.com', '.anvato.com', '.apigee.com', '.appspot.com', '.dialogflow.com', '.gonglchuangl.net', '.google.cn', '.google.com', '.googleplex.com', '.nest.com', '.openthread.io', '.openweave.io', '.orbitera.com', '.tensorflow.org'], 'BLOCK_RSS_FEEDS': 0},
                               '[]','en',
                               true, '',
                               {"f62218c009ec029abef196bba5aa34cf": true, "8de7a048f21618359bd37f5ce44be073": false, "098dafe57affddc137df300142652cfd": false, "8e03e230de0bd8a6fe173fdf172e8b3f": true, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "d169d485cf24243a263783dbe42029b1": true, "039e5d84b87fd75807ffb37b7f1bbf2c": true, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true}, '/kms/docs/',
                               'https://cloud.google.com/');
        })(jQuery);

        
        devsite.localInit = function() {
          
        };

      </script><script>
      $('.devsite-utility-footer-language-select').each(function() {
        $(this).change(function(){$('.devsite-utility-footer-language').submit();});
      });
      </script><script async defer src="//survey.g.doubleclick.net/async_survey?site=5u3vqdlpcnxudk6xz3yb2kknf4"></script></div><span id="devsite-request-elapsed" data-request-elapsed="205.280065536"></span></body></html>
