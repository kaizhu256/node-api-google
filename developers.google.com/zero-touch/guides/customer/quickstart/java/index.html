





<!DOCTYPE html><html lang="en"
      class="chekov"><head><script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script><meta charset="utf-8"><meta name="xsrf_token" content="iCuqTMP3H9BTjIWSXZG4Dz4sOPMdAFrGXvL-wOeAlRQ6MTUyNDQ4MDU4NDU2OTMwMA" /><link rel="canonical" href="https://developers.google.com/zero-touch/guides/customer/quickstart/java"><link rel="alternate" href="https://developers.google.com/zero-touch/guides/customer/quickstart/java" hreflang="en"><link rel="alternate" href="https://developers.google.cn/zero-touch/guides/customer/quickstart/java" hreflang="en-cn"><link rel="alternate" href="https://developers.google.com/zero-touch/guides/customer/quickstart/java" hreflang="x-default"><link rel="shortcut icon" href="https://developers.google.com/_static/d7147bb846/images/favicon.png"><link rel="apple-touch-icon" href="https://developers.google.com/_static/d7147bb846/images/touch-icon.png"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet"
      
      href="//fonts.googleapis.com/css?family=Google+Sans:400|Roboto:400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"
      ><link rel="stylesheet"
        href="https://developers.google.com/_static/d7147bb846/css/devsite-cyan.css"><link rel="search"
        type="application/opensearchdescription+xml"
        title="Google Developers"
        href="https://developers.google.com/s/opensearch.xml"><script src="https://developers.google.com/_static/d7147bb846/js/jquery-bundle.js"></script><meta property="og:site_name" content="Google Developers"><meta property="og:type" content="website"><meta property="og:url" content="https://developers.google.com/zero-touch/guides/customer/quickstart/java"><meta property="og:locale" content="en"><script>
    var ___gcfg = ___gcfg || {};
    ___gcfg.lang = 'en';
  </script><title>Java quickstart &nbsp;|&nbsp; Android zero-touch enrollment
      &nbsp;|&nbsp; Google Developers</title><meta property="og:title" content="Java quickstart &nbsp;|&nbsp; Android zero-touch enrollment
      &nbsp;|&nbsp; Google Developers"><meta property="og:image"
          content="https://developers.google.com/_static/d7147bb846/images/share/devsite-cyan.png"><meta property="og:image:secure_url"
          content="https://developers.google.com/_static/d7147bb846/images/share/devsite-cyan.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"></head><body class="
               devsite-doc-page
               
               
               
               devsite-header-no-upper-tabs
               "
        data-family="endorsed"
        id="top_of_page"><div class="devsite-wrapper"><div class="devsite-top-section-wrapper
            "><header class="devsite-top-section nocontent"><div class="devsite-top-logo-row-wrapper-wrapper"><div class="devsite-top-logo-row-wrapper"><div class="devsite-top-logo-row devsite-full-site-width"><button type="button" class="devsite-expand-section-nav devsite-header-icon-button
                                       button-flat material-icons gc-analytics-event"
                  data-category="Site-Wide Custom Events" data-label="Hamburger menu"></button><div class="devsite-product-name-wrapper"><span class="devsite-product-name"><ul class="devsite-breadcrumb-list"><li class="devsite-breadcrumb-item"><a href="https://developers.google.com/zero-touch/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Upper Header"
       data-value="1">
    
    
      
        Android zero-touch enrollment
      
    
    
    </a></li></ul></span></div><div class="devsite-header-upper-tabs"></div><form class="devsite-search-form"
                action="https://developers.google.com/s/results/"
                method="GET"
                id="top-search"
                search-placeholder='Search'><div id="searchbox" class="devsite-searchbox"><input placeholder='Search'
         
         type="text"
         class="devsite-search-field devsite-search-query"
         name="q"
         value=""
         autocomplete="off"
         
         aria-label="Search box"><div class="devsite-search-image material-icons"></div></div><input type="hidden"
       name="p"
       id="search_project"
       value="/zero-touch/"
       data-project-name="Android zero-touch enrollment"
       data-project-path="/zero-touch/"
       data-query-match=""><input type="hidden" class="suggest-project" value="Android zero-touch enrollment" /><div class="suggest-project-metadata" data-home_url="/zero-touch/" data-path="/zero-touch/" data-name="Android zero-touch enrollment" ></div></form><a class="devsite-header-link devsite-top-button button gc-analytics-event"
               href="https://developers.google.com/products/"
               data-category="Site-Wide Custom Events"
               data-label="Site header link"
               track-type="navigateTo"
               track-name="all products"
               track-metadata-position="nav"><div class="devsite-header-link-label">All Products</div></a><button type="button" class="devsite-search-button devsite-header-icon-button button-flat
                                       material-icons"></button><a href="https://www.google.com/accounts/ServiceLogin?passive=true&continue=https%3A%2F%2Fdevelopers.google.com%2Fzero-touch%2Fguides%2Fcustomer%2Fquickstart%2Fjava%3Frefresh%3D1&service=ahsid"
   class="devsite-user-signin devsite-top-button button gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Sign in button">
  
  Sign in
</a></div></div></div><div class="devsite-collapsible-section"><div class="devsite-header-background devsite-full-site-width"><div class="devsite-doc-set-nav-row devsite-full-site-width"><nav class="devsite-doc-set-nav devsite-nav devsite-overflow-tabs-scroll-wrapper"><ul class="devsite-doc-set-nav-tab-list devsite-overflow-tabs-scroll"><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://developers.google.com/zero-touch/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Home"
       >
        Home
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://developers.google.com/zero-touch/guides/overview"
         class="devsite-doc-set-nav-active devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         aria-label="Guides, selected"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Guides"
       >
        Guides
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://developers.google.com/zero-touch/reference/reseller/rest/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Reference"
       >
        Reference
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://developers.google.com/zero-touch/support/contact"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Support"
       >
        Support
      </a></li><button type="button" id="devsite-feedback-project"
          class="devsite-feedback-button devsite-top-button gc-analytics-event"
          data-category="Site-Wide Custom Events" data-label="Send Feedback Button"
          track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="header">
  
  Send feedback
  </button></ul></nav></div></div></div></header><script>
    if (window.jQuery) {
      $(document).ready(function() {
        if (window.devsite && window.devsite.search) {
          
          window.devsite.search.init('en')
        }
      });
    }
  </script></div><div id="gc-wrapper"itemscope itemtype="http://schema.org/Article"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;Android zero-touch enrollment&quot;, &quot;dimension5&quot;: &quot;en&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-24532603-1&quot;}"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {}, &quot;gaid&quot;: &quot;UA-100339529-1&quot;}"><script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "HK", "language": {"requested": "en", "served": "en"}, "projectName": "Android zero-touch enrollment", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>

      
        <div class="devsite-site-mask"></div>
        
  


<nav class="devsite-nav-responsive devsite-nav nocontent" tabindex="0">
  
  <div class="devsite-nav-responsive-tabs-panel">
    
      



<nav class="devsite-nav-responsive-tabs devsite-nav">
  <ul class="devsite-nav-list">
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://developers.google.com/zero-touch/"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Home">
        Home
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <span class="devsite-nav-responsive-forward devsite-nav-responsive-tab devsite-nav-title
                   devsite-nav-active gc-analytics-event"
            data-category="Site-Wide Custom Events" data-label="Responsive Tab: Guides"
            tabindex="0">
        Guides
      </span>
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://developers.google.com/zero-touch/reference/reseller/rest/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Reference">
        Reference
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://developers.google.com/zero-touch/support/contact?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Support">
        Support
      </a>
      
      
    
    </li>
  
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      <a href="https://developers.google.com/products/"
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
         data-label="Responsive Tab: all_products">
        All Products
      </a>
    </li>
  
  </ul>
</nav>


    
  </div>
  
  
  <div class="devsite-nav-responsive-sidebar-panel">
    
    <div class="devsite-nav-responsive-back" tabindex="0"></div>
    
    <nav class="devsite-nav-responsive-sidebar"></nav>
  </div>
  
  
</nav>


        <div class="devsite-main-content clearfix">

        
        

        
  
  
    
    
      
  <nav class="devsite-section-nav devsite-nav nocontent">
    <ul class="devsite-nav-list devsite-nav-expandable"><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/overview" class="devsite-nav-title">Overview</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path">Portal</span></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/portal" class="devsite-nav-title">Reseller Guide</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path">Reseller API</span></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/how-it-works" class="devsite-nav-title">How it works</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/get-started" class="devsite-nav-title">Get started</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/auth" class="devsite-nav-title">Authorization</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/identifiers" class="devsite-nav-title">Identifiers</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/metadata" class="devsite-nav-title">Device metadata</a></li><li class="devsite-nav-item devsite-nav-item-heading devsite-nav-new devsite-nav-has-status"><span class="devsite-nav-title devsite-nav-title-no-path"><span class="devsite-nav-text">Customer API</span><span class="devsite-nav-icon-wrapper"><span class="devsite-nav-icon material-icons" title="New!"></span></span></span></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/how-it-works" class="devsite-nav-title">How it works</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/auth" class="devsite-nav-title">Authorization</a></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Quickstarts, click to expand/collapse" role="link">Quickstarts</span><a class="devsite-nav-toggle devsite-nav-toggle-expanded material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0"></a><ul class="devsite-nav-section devsite-nav-section-expanded"><li class="devsite-nav-item devsite-nav-active"><a href="https://developers.google.com/zero-touch/guides/customer/quickstart/java" class="devsite-nav-title">Java</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/quickstart/dotnet" class="devsite-nav-title">.NET</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/quickstart/python" class="devsite-nav-title">Python</a></li></ul></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/emm" class="devsite-nav-title">EMM integration</a></li></ul>
  </nav>

    

    
  <nav class="devsite-page-nav devsite-nav"></nav>


      <article class="devsite-article">
        <article class="devsite-article-inner">
  
          
  



  
  <nav class="devsite-breadcrumb-nav devsite-nav">
    


<ul class="devsite-breadcrumb-list">
  
  <li class="devsite-breadcrumb-item">
    
    
    <a href="https://developers.google.com/products/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="1">
    
    
      Products
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.com/zero-touch/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="2">
    
    
      Android zero-touch enrollment
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.com/zero-touch/guides/overview" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="3">
    
    
      Guides
    
    
    </a>
    
  </li>
  
</ul>

  </nav>
  
  
  <h1 itemprop="name" class="devsite-page-title">
    Java quickstart
  </h1>
  
  
  <nav class="devsite-page-nav-embedded devsite-nav"></nav>
  
  <div class="devsite-article-body clearfix
            "
       itemprop="articleBody">
    




























































<!--* freshness: { owner: 'benjaminmiller' reviewed: '2018-01-30' } *-->

<p>Follow the steps in this quickstart guide, and in about 10 minutes you'll have
a simple Java command-line app that makes requests to the zero-touch
enrollment customer API.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>To run this quickstart, you'll need:</p>
<ul>
<li>A Google account, that's a member of your zero-touch enrollment customer
  account. See <a href="https://developers.google.com/zero-touch/guides/customer/how-it-works#get_started">Get
  started</a>.</li>
<li>Java 1.7 or greater.</li>
<li><a class="external" href="http://gradle.org/downloads">Gradle 2.3 or greater</a>.</li>
<li>Access to the internet and a web browser.</li>
</ul>
<h2 id="step_1_turn_on_the_zero-touch_enrollment_api">Step 1: Turn on the zero-touch enrollment API</h2>


<ol>
  <li>Use <a href="https://console.developers.google.com/start/api?id=androiddeviceprovisioning.googleapis.com">this
    wizard</a> to create or select a project in the Google Developers Console and
    automatically turn on the API. Click <strong>Continue</strong>, then <strong>Go to credentials
    </strong>.</li>
  <li>Click <strong>Cancel</strong> on the Add credentials to your project page.</li>
  <li>At the top of the page, select the <strong>OAuth consent screen</strong> tab. Select an
    <strong>Email address</strong>, enter a <strong>Product name</strong> if not already set, and
    click the <strong>Save</strong> button.</li>
  <li>Select the <strong>Credentials</strong> tab, click the <strong>Create credentials</strong>
    button and select <strong>OAuth client ID</strong>.</li>
  
  <li>Select the application type <strong>Other</strong>, enter the name
    "Quickstart", and click the <strong>Create</strong>
    button.</li>
  <li>Click <strong>OK</strong> to dismiss the <em>OAuth client</em> panel.</li>
  
  <li>Click <span class="material-icons">file_download</span> <strong>Download JSON</strong>.</li>
  <li>Move the file to your working directory and rename it <code>client_secret.json</code>.</li>
</ol>

<h2 id="step_2_prepare_the_project">Step 2: Prepare the project</h2>
<p>Follow the steps below to set up your Gradle project:</p>
<ol>
<li>
<p>Run the following command to create a new project in the working directory:</p>
<pre class="prettyprint notranslate" translate="no"><code>gradle init --type basic
mkdir -p src/main/java src/main/resources
</code></pre>
</li>
<li>
<p>Copy the <code>client_secret.json</code> file you downloaded in Step 1 into the
<code>src/main/resources/</code> directory you created above.</p>
</li>
<li>
<p>Open the default <code>build.gradle</code> file and replace its contents with the
following code:</p>
<pre class="prettyprint notranslate" translate="no"><code>apply plugin: 'java'
apply plugin: 'application'

mainClassName = 'Quickstart'
sourceCompatibility = 1.7
targetCompatibility = 1.7
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.google.api-client:google-api-client:1.23.0'
    compile 'com.google.apis:google-api-services-androiddeviceprovisioning:v1-rev18-1.23.0'
    compile 'com.google.oauth-client:google-oauth-client-jetty:1.23.0'
}
</code></pre>
</li>
</ol>
<p>compile "junit:junit:4.+"
compile "junit:junit:+"</p>
<h2 id="step_3_set_up_the_sample">Step 3: Set up the sample</h2>
<p>Create a file named <code>src/main/java/Quickstart.java</code> and copy in the following
code and save the file.</p>
<pre class="prettyprint lang-java">
import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;
import com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;
import com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;
import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.jackson2.JacksonFactory;
import com.google.api.client.util.store.FileDataStoreFactory;
import com.google.api.services.androiddeviceprovisioning.v1.AndroidProvisioningPartner;
import com.google.api.services.androiddeviceprovisioning.v1.model.Company;
import com.google.api.services.androiddeviceprovisioning.v1.model.CustomerListCustomersResponse;
import com.google.api.services.androiddeviceprovisioning.v1.model.CustomerListDpcsResponse;
import com.google.api.services.androiddeviceprovisioning.v1.model.Dpc;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.List;

/**
 * This class forms the quickstart introduction to the zero-touch enrollemnt
 * customer API.
 */
public class Quickstart {

    // A single auth scope is used for the zero-touch enrollment customer API.
    private static final List&lt;String&gt; SCOPES =
          Arrays.asList(&quot;https://www.googleapis.com/auth/androidworkzerotouchemm&quot;);
    private static final String APP_NAME = &quot;Zero-touch Enrollment Java Quickstart&quot;;
    private static final java.io.File DATA_STORE_DIR = new java.io.File(
          System.getProperty(&quot;user.home&quot;), &quot;.credentials/zero-touch.quickstart.json&quot;);

    // Global shared instances
    private static FileDataStoreFactory DATA_STORE_FACTORY;
    private static final JsonFactory JSON_FACTORY = JacksonFactory.getDefaultInstance();
    private static HttpTransport HTTP_TRANSPORT;

    static {
        try {
            HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();
            DATA_STORE_FACTORY = new FileDataStoreFactory(DATA_STORE_DIR);
        } catch (Throwable t) {
            t.printStackTrace();
            System.exit(1);
        }
    }

    /**
     * Creates a Credential object with the correct OAuth2 authorization
     * for the user calling the customer API. The service endpoint invokes
     * this method when setting up a new service instance.
     * @return an authorized Credential object.
     * @throws IOException
     */
    public static Credential authorize() throws IOException {
        // Load client secrets.
        InputStream in =
            Quickstart.class.getResourceAsStream(&quot;/client_secret.json&quot;);

        GoogleClientSecrets clientSecrets =
            GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in, &quot;UTF-8&quot;));

        // Ask the user to authorize the request using their Google Account
        // in their browser.
        GoogleAuthorizationCodeFlow flow =
                new GoogleAuthorizationCodeFlow.Builder(
                        HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)
                .setDataStoreFactory(DATA_STORE_FACTORY)
                .setAccessType(&quot;offline&quot;)
                .build();
        Credential credential = new AuthorizationCodeInstalledApp(
            flow, new LocalServerReceiver()).authorize(&quot;user&quot;);
        System.out.println(
                &quot;Credential file saved to: &quot; + DATA_STORE_DIR.getAbsolutePath());
        return credential;
    }

    /**
     * Build and return an authorized zero-touch enrollemnt API client service. Use the
     * service endpoint to call the API methods.
     * @return an authorized client service endpoint
     * @throws IOException
     */
    public static AndroidProvisioningPartner getService() throws IOException {
        Credential credential = authorize();
        return new AndroidProvisioningPartner.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
                .setApplicationName(APP_NAME)
                .build();
    }

    /**
     * Runs the zero-touch enrollment quickstart app.
     * @throws IOException
     */
    public static void main(String[] args) throws IOException {

      // Create a zero-touch enrollment API service endpoint.
      AndroidProvisioningPartner service = getService();

      // Get the customer&#39;s account. Because a customer might have more
      // than one, limit the results to the first account found.
      AndroidProvisioningPartner.Customers.List accountRequest = service.customers().list();
      accountRequest.setPageSize(1);
      CustomerListCustomersResponse accountResponse = accountRequest.execute();
      if (accountResponse.getCustomers().isEmpty()) {
          // No accounts found for the user. Confirm the Google Account
          // that authorizes the request can access the zero-touch portal.
          System.out.println(&quot;No zero-touch enrollment account found.&quot;);
          System.exit(-1);
      }
      Company customer = accountResponse.getCustomers().get(0);
      String customerAccount = customer.getName();

      // Send an API request to list all the DPCs available using the customer account.
      AndroidProvisioningPartner.Customers.Dpcs.List request =
            service.customers().dpcs().list(customerAccount);
      CustomerListDpcsResponse response = request.execute();

      // Print out the details of each DPC.
      java.util.List&lt;Dpc&gt; dpcs = response.getDpcs();
      for (Dpc dpcApp : dpcs) {
          System.out.format(&quot;Name:%s  APK:%s\n&quot;,
                dpcApp.getDpcName(),
                dpcApp.getPackageName());
      }
    }
}

</pre>

<h2 id="step_4_run_the_sample">Step 4: Run the sample</h2>
<p>Use your operating system's help to run the script in the file. On UNIX and Mac
computers, run the command below in your terminal:</p>
<pre class="prettyprint lang-shell"><code>gradle -q run
</code></pre>

<p>The first time you run the app, you need to authorize access:</p>
<ol>
  <li>The app tries to open a new tab in your default browser. If this fails, copy the URL from the
  console and open it in your browser. If you're not already logged into your Google Account, you're
  prompted to log in. If you're logged into multiple Google accounts, the page prompts you to select
  an account for the authorization.</li>
  <li>Click <strong>Accept</strong>.</li>
  <li>Close the browser tab—the app continues running.</li>
</ol>

<h2 id="notes">Notes</h2>





<ul>
  <li>Because Google API client library stores authorization data on the file system, subsequent
    launches don't prompt you for authorization.</li>
  <li>To reset the app's authorization data, delete the
    <code>~/.credentials/zero-touch.quickstart.json</code> file and run the app again.</li>
  <li>The authorization flow in this quickstart is ideal for a command-line app. To learn how to add
    authorization to a web app, see <a href="https://developers.google.com/api-client-library/java/google-api-java-client/oauth2#web_server_applications">
    OAuth 2.0 Web server applications</a>.</li>
</ul>

<h2 id="troubleshooting">Troubleshooting</h2>
<p>Here are some common things you'll want to check.
  <a href="https://developers.google.com" class="google-feedback" data-p="1633838" data-b="Widget" data-context="internal-anchor">
  Tell us what went wrong</a> with the quickstart and we'll work to fix it.</p>

<ul>
  <li>Check that you're authorizing API calls with the same Google Account that's a member of your
    zero-touch enrollment customer account. Try signing in to the zero-touch enrollment  <a href="https://partner.android.com/zerotouch">portal</a> using the
    same Google Account to test your access.</li>
  <li>Confirm that the account has accepted the latest Terms of Service in
    the <a href="https://partner.android.com/zerotouch">portal</a>. See <a href="https://developers.google.com/zero-touch/guides/customer/auth#customer_accounts">
    Customer accounts</a>.</li>
</ul>

<h2 id="learn_more">Learn more</h2>
<ul>
<li><a href="https://developers.google.com/console/help/new/">Google Developers Console help documentation</a></li>
<li><a href="https://developers.google.com/api-client-library/java/">Google APIs Client for Java documentation</a></li>
<li><a href="https://developers.google.com/api-client-library/java/google-api-java-client/reference/">Google APIs Client Javadocs</a></li>
</ul>

  </div>
  

  
        
  







        
<div class="devsite-content-footer nocontent">
  
  
    <p>Except as otherwise noted, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="https://developers.google.com/terms/site-policies">Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  

  
    
    <p class="devsite-content-footer-date" itemprop="datePublished"
       content="2018-03-15T14:28:04.294210">
      
      Last updated March 15, 2018.
    </p>
  

</div>

        </article>
      </article>
  

        </div>
      

<footer class="devsite-footer-linkboxes nocontent
               
               devsite-footer-linkboxes-with-sites"><nav class="devsite-full-site-width"><ul class="devsite-footer-linkboxes-list"><li class="devsite-footer-linkbox "><h3 class="devsite-footer-linkbox-heading">Product Info</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/zero-touch/support/terms" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Content Page Footer Linkbox">
                Terms of Service
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/zero-touch/support/usage" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Content Page Footer Linkbox">
                Usage Limits
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/zero-touch/support/pricing" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Content Page Footer Linkbox">
                Pricing
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Programs</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="//www.womentechmakers.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Women Techmakers">
                Women Techmakers
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/agency/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Agency">
                Agency Program
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/groups/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Groups">
                GDG
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/experts/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Experts">
                Google Developers Experts
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/startups/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Startups">
                Startup Launchpad
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Developer Consoles</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="//console.developers.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google Developers Console">
                Google API Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//console.cloud.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google Cloud Platform Console">
                Google Cloud Platform Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//play.google.com/apps/publish/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google Play Console">
                Google Play Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//console.firebase.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Firebase Console">
                Firebase Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//cast.google.com/publish/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Cast SDK Developer Console">
                Cast SDK Developer Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//chrome.google.com/webstore/developer/dashboard" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Chrome Web Store Developer Dashboard">
                Chrome Web Store Dashboard
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-sites"><a href="https://developers.google.com/"
           class="gc-analytics-event devsite-footer-linkbox-logo-link"
           data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link"><img class="devsite-footer-linkbox-logo"
               src="https://developers.google.com/_static/d7147bb846/images/redesign-14/lockup-color-knockout.png"
               alt="Google Developers"></a><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="//developer.android.com/index.html" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Android Link">
                Android
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developer.chrome.com/home" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Chrome Link">
                Chrome
            </a></li><li class="devsite-footer-linkbox-item"><a href="//firebase.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Firebase Link">
                Firebase
            </a></li><li class="devsite-footer-linkbox-item"><a href="//cloud.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Cloud Link">
                Google Cloud Platform
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/products/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Products Link">
                All Products
            </a></li></ul></li></ul></nav></footer><footer class="devsite-utility-footer"><nav class="devsite-utility-footer-nav devsite-nav devsite-full-site-width"><div class="devsite-utility-footer-nav-left"><form class="devsite-utility-footer-language" action="/i18n/setlang/" method="post"><input type="hidden" name="xsrf_token" value="iCuqTMP3H9BTjIWSXZG4Dz4sOPMdAFrGXvL-wOeAlRQ6MTUyNDQ4MDU4NDU2OTMwMA" /><input type="hidden" name="next" value="/zero-touch/guides/customer/quickstart/java"><select class="devsite-utility-footer-language-select kd-select" name="language"
                track-type="languageSelector" track-name="click"><option value="id"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="id">
            Bahasa Indonesia
          </option><option value="de"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="de">
            Deutsch
          </option><option value="en"
                 selected="selected" 
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="en">
            English
          </option><option value="es"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="es">
            español
          </option><option value="fr"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="fr">
            français
          </option><option value="pt-br"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="pt-br">
            Português Brasileiro
          </option><option value="ru"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="ru">
            Русский
          </option><option value="ja"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="ja">
            日本語
          </option><option value="zh-cn"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="zh-cn">
            简体中文
          </option><option value="ko"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="ko">
            한국어
          </option></select></form><span class="devsite-utility-footer-links"><a class="devsite-utility-footer-link gc-analytics-event"
           href="https://developers.google.com/terms/site-terms"
           data-category="Site-Wide Custom Events"
           data-label="Footer terms link"
           data-footer-link-id="terms"
           >Terms
         </a><a class="devsite-utility-footer-link gc-analytics-event"
           href="//www.google.com/policies/privacy/"
           data-category="Site-Wide Custom Events"
           data-label="Footer privacy link"
           data-footer-link-id="privacy"
           >Privacy
         </a></span></div><div class="devsite-utility-footer-nav-right"><div class="devsite-utility-footer-newsletter-signup-text">
        Sign up for the Google Developers newsletter
      </div><a class="button button-primary devsite-utility-footer-newsletter-signup-button"
         href="//services.google.com/fb/forms/googledevelopersnewsletter/?utm_medium=referral&amp;utm_source=google-products&amp;utm_team=googledevs&amp;utm_campaign=201611-newsletter-launch">
        
        Subscribe
      </a></div></nav></footer><div class="devsite-feedback-dialog devsite-dialog"><div class="devsite-dialog-contents"><h3>Send feedback about...</h3><div class="devsite-feedback-item"><a data-type="documentation" class="gc-analytics-event"
           data-category="Site-Wide Custom Events" data-label="Docs Feedback Image"
           track-type="feedback" track-name="feedbackDocIcon" track-metadata-position="header"><div class="devsite-feedback-item-icon-container"><div class="devsite-feedback-item-icon-white devsite-feedback-item-icon-docs
                        material-icons"></div></div></a><div class="devsite-feedback-item-name">
          
          This page
        </div><div class="devsite-feedback-item-description"><a data-type="documentation" tabindex="0" class="gc-analytics-event"
             data-category="Site-Wide Custom Events" data-label="Docs Feedback Text"
             track-type="feedback" track-name="feedbackDocText" track-metadata-position="header">
            
            Documentation feedback
          </a></div></div><div class="devsite-feedback-item"><a data-type="product" tabindex="0" class="gc-analytics-event"
           data-category="Site-Wide Custom Events" data-label="Product Feedback Image"
           track-type="feedback" track-name="feedbackProductIcon" track-metadata-position="header"
         ><img class="devsite-feedback-item-icon"
               src="https://developers.google.com/_static/d7147bb846/images/feedback/google_56px.svg"></a><div class="devsite-feedback-item-name">
        Android zero-touch enrollment
        </div><div class="devsite-feedback-item-description"><a data-type="product" tabindex="0" class="gc-analytics-event"
             data-category="Site-Wide Custom Events" data-label="Product Feedback Text"
             track-type="feedback" track-name="feedbackProductText" track-metadata-position="header"
           >
            
            Product feedback
          </a></div></div></div><div class="devsite-dialog-buttons"><button type="button" class="devsite-feedback-cancel button-white gc-analytics-event"
              data-category="Site-Wide Custom Events" data-label="Cancel Feedback Button"
              track-type="feedback" track-name="cancelFeedbackButton"
              track-metadata-position="header">
        
        Cancel
      </button></div></div><script>
  $(document).ready(function() {
    new devsite.feedback.Widget({
        'product_id': '1633838',
        'bucket': '',
        'context': '',
        'version': 'devsite-20180420-r00-rc00.default'
      },
      document.querySelectorAll('.devsite-feedback-button'),
      'en',
      document.querySelector('.devsite-site-mask'),
      document.querySelector('.devsite-feedback-dialog'),
      document.querySelector('.devsite-feedback-cancel'),
      document.querySelectorAll('.devsite-feedback-item a:not([href])')
    );
  });
  </script></div><script async defer src="//www.gstatic.com/feedback/api.js"></script><script src="https://developers.google.com/_static2/d7147bb846/jsi18n/"></script><script src="https://developers.google.com/_static/d7147bb846/js/script_foot_closure.js"></script><script src="https://developers.google.com/_static/d7147bb846/js/script_foot.js"></script><script>
        (function($) {
          
          devsite.devsite.Init($, {'ENABLE_BLOCKED_VIDEO_PLACEHOLDER': 0, 'SITE_NAME': 'devsite', 'FULL_SITE_SEARCH_ENABLED': 1, 'ENABLE_CLOUDTRACK': 0, 'VTAGS_ENABLED': 0, 'HISTORY_ENABLED': 1, 'VERSION_HASH': 'd7147bb846', 'SCRIPTSAFE_DOMAIN': 'google-developers.appspot.com', 'ENABLE_BLOCKED_LINK_TOOLTIP': 0, 'ALLOWED_HOSTS': ['.android.com', '.anvato.com', '.apigee.com', '.appspot.com', '.dialogflow.com', '.gonglchuangl.net', '.google.cn', '.google.com', '.googleplex.com', '.nest.com', '.openthread.io', '.openweave.io', '.orbitera.com', '.tensorflow.org'], 'BLOCK_RSS_FEEDS': 0},
                               '[]','en',
                               true, '',
                               {"f62218c009ec029abef196bba5aa34cf": true, "8de7a048f21618359bd37f5ce44be073": false, "098dafe57affddc137df300142652cfd": false, "8e03e230de0bd8a6fe173fdf172e8b3f": true, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "d169d485cf24243a263783dbe42029b1": true, "039e5d84b87fd75807ffb37b7f1bbf2c": true, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true}, '/zero-touch/',
                               'https://developers.google.com/');
        })(jQuery);

        
        devsite.localInit = function() {
          
        };

      </script><script>
      $('.devsite-utility-footer-language-select').each(function() {
        $(this).change(function(){$('.devsite-utility-footer-language').submit();});
      });
      </script></div><span id="devsite-request-elapsed" data-request-elapsed="163.310050964"></span></body></html>
