





<!DOCTYPE html><html lang="en"
      class="chekov"><head><script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script><meta charset="utf-8"><meta name="xsrf_token" content="sB2VIBTOnnkRedE9_THD1Oa6gLMrAuWlGnw5gMNQqGQ6MTUyNDQ1OTkzMTE3NTcwMA" /><link rel="canonical" href="https://developers.google.com/zero-touch/guides/how-it-works"><link rel="alternate" href="https://developers.google.com/zero-touch/guides/how-it-works" hreflang="en"><link rel="alternate" href="https://developers.google.cn/zero-touch/guides/how-it-works" hreflang="en-cn"><link rel="alternate" href="https://developers.google.com/zero-touch/guides/how-it-works" hreflang="x-default"><link rel="shortcut icon" href="https://developers.google.com/_static/d7147bb846/images/favicon.png"><link rel="apple-touch-icon" href="https://developers.google.com/_static/d7147bb846/images/touch-icon.png"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet"
      
      href="//fonts.googleapis.com/css?family=Google+Sans:400|Roboto:400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"
      ><link rel="stylesheet"
        href="https://developers.google.com/_static/d7147bb846/css/devsite-cyan.css"><link rel="search"
        type="application/opensearchdescription+xml"
        title="Google Developers"
        href="https://developers.google.com/s/opensearch.xml"><script src="https://developers.google.com/_static/d7147bb846/js/jquery-bundle.js"></script><meta property="og:site_name" content="Google Developers"><meta property="og:type" content="website"><meta property="og:url" content="https://developers.google.com/zero-touch/guides/how-it-works"><meta property="og:locale" content="en"><script>
    var ___gcfg = ___gcfg || {};
    ___gcfg.lang = 'en';
  </script><title>How it works &nbsp;|&nbsp; Android zero-touch enrollment
      &nbsp;|&nbsp; Google Developers</title><meta property="og:title" content="How it works &nbsp;|&nbsp; Android zero-touch enrollment
      &nbsp;|&nbsp; Google Developers"><meta property="og:image"
          content="https://developers.google.com/_static/d7147bb846/images/share/devsite-cyan.png"><meta property="og:image:secure_url"
          content="https://developers.google.com/_static/d7147bb846/images/share/devsite-cyan.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"></head><body class="
               devsite-doc-page
               
               
               
               devsite-header-no-upper-tabs
               "
        data-family="endorsed"
        id="top_of_page"><div class="devsite-wrapper"><div class="devsite-top-section-wrapper
            "><header class="devsite-top-section nocontent"><div class="devsite-top-logo-row-wrapper-wrapper"><div class="devsite-top-logo-row-wrapper"><div class="devsite-top-logo-row devsite-full-site-width"><button type="button" class="devsite-expand-section-nav devsite-header-icon-button
                                       button-flat material-icons gc-analytics-event"
                  data-category="Site-Wide Custom Events" data-label="Hamburger menu"></button><div class="devsite-product-name-wrapper"><span class="devsite-product-name"><ul class="devsite-breadcrumb-list"><li class="devsite-breadcrumb-item"><a href="https://developers.google.com/zero-touch/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Upper Header"
       data-value="1">
    
    
      
        Android zero-touch enrollment
      
    
    
    </a></li></ul></span></div><div class="devsite-header-upper-tabs"></div><form class="devsite-search-form"
                action="https://developers.google.com/s/results/"
                method="GET"
                id="top-search"
                search-placeholder='Search'><div id="searchbox" class="devsite-searchbox"><input placeholder='Search'
         
         type="text"
         class="devsite-search-field devsite-search-query"
         name="q"
         value=""
         autocomplete="off"
         
         aria-label="Search box"><div class="devsite-search-image material-icons"></div></div><input type="hidden"
       name="p"
       id="search_project"
       value="/zero-touch/"
       data-project-name="Android zero-touch enrollment"
       data-project-path="/zero-touch/"
       data-query-match=""><input type="hidden" class="suggest-project" value="Android zero-touch enrollment" /><div class="suggest-project-metadata" data-home_url="/zero-touch/" data-path="/zero-touch/" data-name="Android zero-touch enrollment" ></div></form><a class="devsite-header-link devsite-top-button button gc-analytics-event"
               href="https://developers.google.com/products/"
               data-category="Site-Wide Custom Events"
               data-label="Site header link"
               track-type="navigateTo"
               track-name="all products"
               track-metadata-position="nav"><div class="devsite-header-link-label">All Products</div></a><button type="button" class="devsite-search-button devsite-header-icon-button button-flat
                                       material-icons"></button><a href="https://www.google.com/accounts/ServiceLogin?passive=true&continue=https%3A%2F%2Fdevelopers.google.com%2Fzero-touch%2Fguides%2Fhow-it-works%3Frefresh%3D1&service=ahsid"
   class="devsite-user-signin devsite-top-button button gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Sign in button">
  
  Sign in
</a></div></div></div><div class="devsite-collapsible-section"><div class="devsite-header-background devsite-full-site-width"><div class="devsite-doc-set-nav-row devsite-full-site-width"><nav class="devsite-doc-set-nav devsite-nav devsite-overflow-tabs-scroll-wrapper"><ul class="devsite-doc-set-nav-tab-list devsite-overflow-tabs-scroll"><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://developers.google.com/zero-touch/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Home"
       >
        Home
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://developers.google.com/zero-touch/guides/overview"
         class="devsite-doc-set-nav-active devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         aria-label="Guides, selected"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Guides"
       >
        Guides
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://developers.google.com/zero-touch/reference/reseller/rest/"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Reference"
       >
        Reference
      </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
               "><a href="https://developers.google.com/zero-touch/support/contact"
         class=" devsite-nav-tab
                devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
         
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Support"
       >
        Support
      </a></li><button type="button" id="devsite-feedback-project"
          class="devsite-feedback-button devsite-top-button gc-analytics-event"
          data-category="Site-Wide Custom Events" data-label="Send Feedback Button"
          track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="header">
  
  Send feedback
  </button></ul></nav></div></div></div></header><script>
    if (window.jQuery) {
      $(document).ready(function() {
        if (window.devsite && window.devsite.search) {
          
          window.devsite.search.init('en')
        }
      });
    }
  </script></div><div id="gc-wrapper"itemscope itemtype="http://schema.org/Article"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;Android zero-touch enrollment&quot;, &quot;dimension5&quot;: &quot;en&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-24532603-1&quot;}"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {}, &quot;gaid&quot;: &quot;UA-100339529-1&quot;}"><script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "HK", "language": {"requested": "en", "served": "en"}, "projectName": "Android zero-touch enrollment", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>

      
        <div class="devsite-site-mask"></div>
        
  


<nav class="devsite-nav-responsive devsite-nav nocontent" tabindex="0">
  
  <div class="devsite-nav-responsive-tabs-panel">
    
      



<nav class="devsite-nav-responsive-tabs devsite-nav">
  <ul class="devsite-nav-list">
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://developers.google.com/zero-touch/"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Home">
        Home
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <span class="devsite-nav-responsive-forward devsite-nav-responsive-tab devsite-nav-title
                   devsite-nav-active gc-analytics-event"
            data-category="Site-Wide Custom Events" data-label="Responsive Tab: Guides"
            tabindex="0">
        Guides
      </span>
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://developers.google.com/zero-touch/reference/reseller/rest/?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Reference">
        Reference
      </a>
      
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="https://developers.google.com/zero-touch/support/contact?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Support">
        Support
      </a>
      
      
    
    </li>
  
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      <a href="https://developers.google.com/products/"
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
         data-label="Responsive Tab: all_products">
        All Products
      </a>
    </li>
  
  </ul>
</nav>


    
  </div>
  
  
  <div class="devsite-nav-responsive-sidebar-panel">
    
    <div class="devsite-nav-responsive-back" tabindex="0"></div>
    
    <nav class="devsite-nav-responsive-sidebar"></nav>
  </div>
  
  
</nav>


        <div class="devsite-main-content clearfix">

        
        

        
  
  
    
    
      
  <nav class="devsite-section-nav devsite-nav nocontent">
    <ul class="devsite-nav-list devsite-nav-expandable"><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/overview" class="devsite-nav-title">Overview</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path">Portal</span></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/portal" class="devsite-nav-title">Reseller Guide</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path">Reseller API</span></li><li class="devsite-nav-item devsite-nav-active"><a href="https://developers.google.com/zero-touch/guides/how-it-works" class="devsite-nav-title">How it works</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/get-started" class="devsite-nav-title">Get started</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/auth" class="devsite-nav-title">Authorization</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/identifiers" class="devsite-nav-title">Identifiers</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/metadata" class="devsite-nav-title">Device metadata</a></li><li class="devsite-nav-item devsite-nav-item-heading devsite-nav-new devsite-nav-has-status"><span class="devsite-nav-title devsite-nav-title-no-path"><span class="devsite-nav-text">Customer API</span><span class="devsite-nav-icon-wrapper"><span class="devsite-nav-icon material-icons" title="New!"></span></span></span></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/how-it-works" class="devsite-nav-title">How it works</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/auth" class="devsite-nav-title">Authorization</a></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Quickstarts, click to expand/collapse" role="link">Quickstarts</span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/quickstart/java" class="devsite-nav-title">Java</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/quickstart/dotnet" class="devsite-nav-title">.NET</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/quickstart/python" class="devsite-nav-title">Python</a></li></ul></li><li class="devsite-nav-item"><a href="https://developers.google.com/zero-touch/guides/customer/emm" class="devsite-nav-title">EMM integration</a></li></ul>
  </nav>

    

    
  <nav class="devsite-page-nav devsite-nav"></nav>


      <article class="devsite-article">
        <article class="devsite-article-inner">
  
          
  



  
  <nav class="devsite-breadcrumb-nav devsite-nav">
    


<ul class="devsite-breadcrumb-list">
  
  <li class="devsite-breadcrumb-item">
    
    
    <a href="https://developers.google.com/products/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="1">
    
    
      Products
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.com/zero-touch/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="2">
    
    
      Android zero-touch enrollment
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.com/zero-touch/guides/overview" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="3">
    
    
      Guides
    
    
    </a>
    
  </li>
  
</ul>

  </nav>
  
  
  <h1 itemprop="name" class="devsite-page-title">
    How it works
  </h1>
  
  
  <nav class="devsite-page-nav-embedded devsite-nav"></nav>
  
  <div class="devsite-article-body clearfix
            "
       itemprop="articleBody">
    




























































<h2 id="introduction">Introduction</h2>
<p>The zero-touch enrollment API helps device resellers automate their integration.
Your organization's sales tools can build in zero-touch enrollment—making your
users, and your customers, more productive. Use the API to help your users:</p>
<ul>
<li>Assign purchased devices to a customer's zero-touch enrollment account.</li>
<li>Create your customer's zero-touch enrollment account.</li>
<li>Attach your organization's telephone and order metadata to devices.</li>
<li>Create reports about devices assigned to your customers.</li>
</ul>
<p>This document introduces the API and explains the patterns. If you want to
explore the API yourself, see <a href="https://developers.google.com/zero-touch/guides/get-started">Get started</a>.</p>
<h2 id="api_concepts">API concepts</h2>
<p>Customers and devices are the core resources you use in the API. To create
customers, call <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.customers/create"><code>create</code></a>. You can create devices
using the claim API methods (<a href="#claim">see below</a>). Your organization can also
create customers and devices using the zero-touch enrollment <a href="https://partner.android.com/zerotouch">portal</a>.</p>
<p><img alt="Device and customer resource relationship" src="https://developers.google.com/zero-touch/images/guides/how-it-works/resources.svg" /></p>
<dl>
<dt>Customer</dt>
<dd>Companies that your organization sell devices to. Customers have a <code>name</code> and
an <code>ID</code>. Use a customer when you want to claim or find their devices. To learn
more, see <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.customers"><code>Customer</code></a>.</dd>
<dt>Device</dt>
<dd>A zero-touch enrollment-capable Android device your organization sells to a
customer. Devices have hardware IDs, metadata, and customer claims. Devices are
central to the API, so you use them in almost all methods. To learn more, see
<a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.devices"><code>Device</code></a>.</dd>
<dt>DeviceIdentifier</dt>
<dd>Encapsulates hardware IDs, such as IMEI or MEID, to identify a manufactured
device. Use a <code>DeviceIdentifier</code> to target the device you want to find, update,
or claim. To learn more, read <a href="https://developers.google.com/zero-touch/guides/identifiers">Identifiers</a>.</dd>
<dt>DeviceMetadata</dt>
<dd>Stores key-value pairs of metadata for the device. Use <code>DeviceMetadata</code> to
store your organization's metadata. To learn more, read
<a href="https://developers.google.com/zero-touch/guides/metadata">Device metadata</a>.</dd>
</dl>
<p>To list all the API methods and resources your app can use, see the
<a href="https://developers.google.com/zero-touch/reference/reseller/rest/">API Reference</a>.</p>
<h2 id="customer">Create customers</h2>
<p>You can call the <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.customers/create"><code>create</code></a> API method to create
customer accounts for zero-touch enrollment. Because your customers see the
company name in their zero-touch enrollment portal, your app's user should
confirm that it's correct. You can't edit a customer's name after you create
the customer.</p>
<p>You need to include at least one corporate email address, associated with a
Google Account, to be the owner. You can't use personal Gmail accounts with the
API. If the customer needs help associating the account, send the instructions
from <a href="https://developers.google.com/zero-touch/guides/portal/#associate-account">Associate a Google Account</a>.</p>
<aside class="note"><strong>Note:</strong><span> The API returns an error when one or more of the email addresses isn't
associated with a Google Account. When this happens, ask your user to <a href="https://support.google.com/accounts/answer/40560">check
that there's a Google Account</a>
for each email address. Google doesn't provide an API to check if an email
address is associated with a Google Account.</span></aside>
<p>After you create a customer by calling the API, they manage their employees'
portal access—you can't edit your customers' users using the API. The Python
snippet below shows how you might create a customer:</p>
<pre class="prettyprint lang-python"><code># Provide the customer data as a Company type
company = {'companyName':'XYZ Corp', \
  'ownerEmails':['liz@example.com', 'darcy@example.com'], \
  'adminEmails':['jane@example.com']}

# Set the reseller ID as the partner
parent_resource = 'partners/{0}'.format(MY_PARTNER_ID)

# Create the customer using the values in the company
results = provisioning.partners().customers().create(parent=parent_resource,
  body={'customer':company}).execute()
</code></pre>

<p>The API doesn't notify your customer that they have access. Typically, your
organization contacts the customer to tell them about the portal. You might want
to send them a link to the portal so that they can manage their users. To learn
more about the owner and admin roles for employees of your customer, read
<a href="https://developers.google.com/zero-touch/guides/portal/#users">Portal users</a>.</p>
<h2 id="claim">Claim devices for customers</h2>
<p>After your customers purchase devices, they'll want to configure provisioning
settings for these devices in their account. Claiming a device adds the device
to zero-touch enrollment and shows the device in the customer's view of the
portal.</p>
<p>A device's provisioning record has a section for zero-touch enrollment. You
assign the device by claiming the record's zero-touch enrollment section for a
customer. Call the <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.devices/claim"><code>partners.devices.claim</code></a> or
<a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.devices/claimAsync"><code>partners.devices.claimAsync</code></a> methods with the
customer as an argument. Always supply <code>SECTION_TYPE_ZERO_TOUCH</code> as a value for
<code>sectionType</code>.</p>
<p>You'll need to unclaim (<a href="#claim">see below</a>) a customer's device before you can
claim the same device for a different customer. The claim methods
<a href="https://developers.google.com/zero-touch/guides/identifiers">validate</a> the <code>DeviceIdentifier</code> fields, including the IMEI
number and <a href="https://developers.google.com/zero-touch/resources/manufacturer-names">manufacturer name</a>, when
creating a new device.</p>
<p>The Python snippet below shows how to claim a device:</p>
<pre class="prettyprint lang-python"><code># Identify the device to claim
device_identifier = {'manufacturer':'Google', \
 'model':'Pixel', 'imei':'123456789012347'}

# Create the body to connect the customer with the device
request_body = {'deviceIdentifier':device_identifier, \
 'customerId':TARGET_CUSTOMER, \
 'sectionType':'SECTION_TYPE_ZERO_TOUCH'}

# Claim the device
results = provisioning.partners().devices().claim(partnerId=MY_PARTNER_ID,
 body=request_body).execute()
</code></pre>

<h3 id="unclaiming_devices">Unclaiming devices</h3>
<p>Your organization can unclaim a device from a customer. Unclaiming a device
removes it from zero-touch enrollment. A reseller might unclaim a device that
they want migrated to another account, returned, or that was mistakenly claimed.
Call the method <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.devices/unclaim"><code>partners.devices.unclaim</code></a> or
<a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.devices/unclaimAsync"><code>partners.devices.unclaimAsync</code></a> to unclaim a
device from a customer.</p>
<aside class="caution"><strong>Caution:</strong><span> Consider prompting your app's user to confirm that they have the
correct device before calling unclaim APIs. Unclaiming a device removes the
customer's provisioning setup and the device becomes unmanaged after a factory
reset.</span></aside>
<h2 id="long-running_batch_tasks">Long-running batch tasks</h2>
<p>The API includes asynchronous versions of the <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.devices#methods">device methods</a>.
These methods allow batch processing of many devices, while the synchronous
methods process one device for each API request. The asynchronous method names
have an <em>Async</em> suffix, for example <code>claimAsync</code>.</p>
<p>Asynchronous API methods return a result before the task is complete.
Asynchronous methods help your app (or tool) remain responsive for your users
while they wait for a long-running task to complete. Your app should check the
status of the task periodically.</p>
<h3 id="operations">Operations</h3>
<p>You use an <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/operations"><code>Operation</code></a> to track a long-running task. A successful
asynchronous method call returns a reference to the operation in the response.
The JSON snippet below shows a typical response after calling
<code>updateMetadataAsync</code>:</p>
<pre class="prettyprint lang-json"><code>{
  &quot;name&quot;: &quot;operations/apibatchoperation/1234567890123476789&quot;
}
</code></pre>

<p>Call <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/operations/get"><code>operations.get</code></a> to find out information about the status
and results of the task. The Python snippet below shows how you might do this.
In your own app, you'll need to handle any errors.</p>
<pre class="prettyprint lang-python"><code># Build out the request body using a list of updates
updates = [{'deviceMetadata':metadata,'deviceId':TARGET_DEVICE_ID}]

# Start the device metadata update
results = provisioning.partners().devices().updateMetadataAsync(
partnerId=MY_PARTNER_ID, body={'updates':updates}).execute()

# Assume the metadata update started, so get the Operation for the task
task = provisioning.operations().get(name=results['name']).execute()
</code></pre>

<p>To find out if an operation finished, check the operation for a <code>done</code> field
with a value of <code>true</code>. If <code>done</code> is missing or <code>false</code>, the operation is still
running.</p>
<h3 id="responses">Responses</h3>
<p>After an operation finishes, the API updates the operation with the result—even
if all or none of the items are successful. The <code>response</code> field is a
<a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/DevicesLongRunningOperationResponse"><code>DevicesLongRunningOperationResponse</code></a>
object detailing the processing of each item in the task.</p>
<p>Inspect the <code>successCount</code> field to efficiently find out if any items failed and
avoid iterating through large result lists. The <code>perDeviceStatus</code> field of
<code>DevicesLongRunningOperationResponse</code> is a list of
<a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/DevicesLongRunningOperationResponse#OperationPerDevice"><code>OperationPerDevice</code></a> instances detailing each item in the
task. The list order matches the items in the original request.</p>
<p>Each <code>OperationPerDevice</code> item contains a <code>result</code> field and a reminder summary
of the request received by the server. Check if the item succeeded or failed
using the <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/DevicesLongRunningOperationResponse#PerDeviceStatusInBatch"><code>result</code></a> field.</p>
<p>The JSON snippet below shows part of a typical response from an operation after
a call to <code>updateMetadataAsync</code>:</p>
<pre class="prettyprint lang-json"><code>&quot;response&quot;: {
  &quot;perDeviceStatus&quot;: [
    {
      &quot;result&quot;: {
        &quot;deviceId&quot;: &quot;12345678901234567&quot;,
        &quot;status&quot;: &quot;SINGLE_DEVICE_STATUS_SUCCESS&quot;
      },
      &quot;updateMetadata&quot;: {
        &quot;deviceId&quot;: &quot;12345678901234567&quot;,
        &quot;deviceMetadata&quot;: {
          &quot;entries&quot;: {
            &quot;phonenumber&quot;: &quot;+1 (800) 555-0100&quot;
          }
        }
      }
    }
  ],
  &quot;successCount&quot;: 1
}
</code></pre>

<h3 id="track_progress">Track progress</h3>
<p>If your app needs to track progress of a task, you should periodically refetch
the operation. The <code>metadata</code> field contains a
<a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/DevicesLongRunningOperationMetadata"><code>DevicesLongRunningOperationMetadata</code></a>
instance to help your app check the latest progress of a running operation. Use
the fields of <code>DevicesLongRunningOperationMetadata</code> listed in the following
table to track the operation's progress.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Typical use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>processingStatus</code></td>
<td>Changes from <code>BATCH_PROCESS_PENDING</code> to <code>BATCH_PROCESS_IN_PROGRESS</code>, and then to <code>BATCH_PROCESS_PROCESSED</code> as the operation progresses.</td>
</tr>
<tr>
<td><code>progress</code></td>
<td>The percentage of updates processed. Your app can use this to estimate a finish time. Because the <code>progress</code> value can be <em>100</em> while the operation is finishing up, check the <code>done</code> field of an operation to know if it finished and has a result.</td>
</tr>
<tr>
<td><code>devicesCount</code></td>
<td>Shows the number of updates in the operation. This might be different from the number of updates in your request if the API can't parse some of the updates.</td>
</tr>
</tbody>
</table>
<p>The simplified Python example below shows how an app might use the progress
metadata to set polling intervals. In your app, you might need a more
sophisticated task runner for polling. You'll also need to add error handling.</p>
<pre class="prettyprint lang-python"><code>MIN_INTERVAL = 2.0
MAX_INTERVAL = 10.0

# ...

# Start the device metadata update
results = provisioning.partners().devices().updateMetadataAsync(
  partnerId=MY_PARTNER_ID, body={'updates':updates}).execute()

op_name = results['name']
start_time = time.time()

# Start polling for completion
while True:
  # Get the latest update on the operation's progress using the API
  op = provisioning.operations().get(name=op_name).execute()

  if 'done' in op and op['done']:
    # The operation is finished. Print task status
    print('Operation complete: {0} of {1} successful device updates'.format(
      op['response']['successCount'], op['metadata']['devicesCount']
    ))
    break
  else:
    # Estimate how long the operation *should* take - within min and max value
    progress = op['metadata']['progress']
    interval = (time.time() - start_time) * ((100.0 - progress) / progress)
    interval = max(MIN_INTERVAL, min(interval, MAX_INTERVAL))

    # Sleep until the tasks should be complete
    time.sleep(interval)
</code></pre>

<p>Choose a polling approach that makes sense for your app's users. Some app users
might benefit from regular progress updates if they're waiting for a process to
complete.</p>
<h2 id="paged">Paged results</h2>
<p>The <a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.devices/findByOwner"><code>partners.devices.findByOwner</code></a> API method
might return very large lists of devices. To reduce the response size, this and
other API methods (such as
<a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.devices/findByIdentifier"><code>partners.devices.findByIdentifier</code></a>)
support paged results. With paged results, your application can iteratively
request and process large lists one page at a time.</p>
<p>After calling the API method, check if the response includes a value for
<a href="https://developers.google.com/zero-touch/reference/reseller/rest/v1/partners.devices/findByOwner#response-body"><code>nextPageToken</code></a>. If <code>nextPageToken</code>
isn't <code>null</code>, your app can use it to fetch another page of devices by calling
the method again. You need to set an upper limit for the number of devices in
the <code>limit</code> parameter. If <code>nextPageToken</code> is <code>null</code>, your app has requested the
last page.</p>
<p>The Python example method below shows how your app might print a list of
devices, one page at a time:</p>
<pre class="prettyprint lang-python"><code>MAX_PAGE_SIZE = 10

def print_devices(page_token):
  &quot;&quot;&quot;Demonstrates how to loop through paginated lists of devices.&quot;&quot;&quot;

  # Create the body to find the customer's devices.
  request_body = {'limit':MAX_PAGE_SIZE, \
    'pageToken':page_token, \
    'customerId':[TARGET_CUSTOMER], \
    'sectionType':'SECTION_TYPE_ZERO_TOUCH'}

  # Call the API to get a page of Devices. Send a page token from the method
  # argument (might be None). If the page token is None, the API returns the first page.
  results = provisioning.partners().devices().findByOwner(partnerId=MY_PARTNER_ID,
    body=request_body).execute()

  # Print the devices included in this page of results.
  for device in results['devices']:
    print 'Device: {0}'.format(device['name'])
  print '---'

  # Check to see if another page of devices is available. If yes,
  # fetch and print the devices.
  if 'nextPageToken' in results:
    print_devices(results['nextPageToken'])

print_devices(None)
</code></pre>

<h2 id="next_steps">Next steps</h2>
<p>Now that you know how the API works, read <a href="https://developers.google.com/zero-touch/guides/get-started">Get started</a> to set up
authorization and try out the examples.</p>

  </div>
  

  
        
  







        
<div class="devsite-content-footer nocontent">
  
  
    <p>Except as otherwise noted, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="https://developers.google.com/terms/site-policies">Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  

  
    
    <p class="devsite-content-footer-date" itemprop="datePublished"
       content="2018-03-07T11:09:50.096250">
      
      Last updated March 7, 2018.
    </p>
  

</div>

        </article>
      </article>
  

        </div>
      

<footer class="devsite-footer-linkboxes nocontent
               
               devsite-footer-linkboxes-with-sites"><nav class="devsite-full-site-width"><ul class="devsite-footer-linkboxes-list"><li class="devsite-footer-linkbox "><h3 class="devsite-footer-linkbox-heading">Product Info</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/zero-touch/support/terms" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Content Page Footer Linkbox">
                Terms of Service
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/zero-touch/support/usage" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Content Page Footer Linkbox">
                Usage Limits
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/zero-touch/support/pricing" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Content Page Footer Linkbox">
                Pricing
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Programs</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="//www.womentechmakers.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Women Techmakers">
                Women Techmakers
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/agency/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Agency">
                Agency Program
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/groups/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Groups">
                GDG
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/experts/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Experts">
                Google Developers Experts
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/startups/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Startups">
                Startup Launchpad
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Developer Consoles</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="//console.developers.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google Developers Console">
                Google API Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//console.cloud.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google Cloud Platform Console">
                Google Cloud Platform Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//play.google.com/apps/publish/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google Play Console">
                Google Play Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//console.firebase.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Firebase Console">
                Firebase Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//cast.google.com/publish/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Cast SDK Developer Console">
                Cast SDK Developer Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="//chrome.google.com/webstore/developer/dashboard" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Chrome Web Store Developer Dashboard">
                Chrome Web Store Dashboard
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-sites"><a href="https://developers.google.com/"
           class="gc-analytics-event devsite-footer-linkbox-logo-link"
           data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link"><img class="devsite-footer-linkbox-logo"
               src="https://developers.google.com/_static/d7147bb846/images/redesign-14/lockup-color-knockout.png"
               alt="Google Developers"></a><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="//developer.android.com/index.html" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Android Link">
                Android
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developer.chrome.com/home" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Chrome Link">
                Chrome
            </a></li><li class="devsite-footer-linkbox-item"><a href="//firebase.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Firebase Link">
                Firebase
            </a></li><li class="devsite-footer-linkbox-item"><a href="//cloud.google.com" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Cloud Link">
                Google Cloud Platform
            </a></li><li class="devsite-footer-linkbox-item"><a href="//developers.google.com/products/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Products Link">
                All Products
            </a></li></ul></li></ul></nav></footer><footer class="devsite-utility-footer"><nav class="devsite-utility-footer-nav devsite-nav devsite-full-site-width"><div class="devsite-utility-footer-nav-left"><form class="devsite-utility-footer-language" action="/i18n/setlang/" method="post"><input type="hidden" name="xsrf_token" value="sB2VIBTOnnkRedE9_THD1Oa6gLMrAuWlGnw5gMNQqGQ6MTUyNDQ1OTkzMTE3NTcwMA" /><input type="hidden" name="next" value="/zero-touch/guides/how-it-works"><select class="devsite-utility-footer-language-select kd-select" name="language"
                track-type="languageSelector" track-name="click"><option value="id"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="id">
            Bahasa Indonesia
          </option><option value="de"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="de">
            Deutsch
          </option><option value="en"
                 selected="selected" 
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="en">
            English
          </option><option value="es"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="es">
            español
          </option><option value="fr"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="fr">
            français
          </option><option value="pt-br"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="pt-br">
            Português Brasileiro
          </option><option value="ru"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="ru">
            Русский
          </option><option value="ja"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="ja">
            日本語
          </option><option value="zh-cn"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="zh-cn">
            简体中文
          </option><option value="ko"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="en"
                track-metadata-selected-language="ko">
            한국어
          </option></select></form><span class="devsite-utility-footer-links"><a class="devsite-utility-footer-link gc-analytics-event"
           href="https://developers.google.com/terms/site-terms"
           data-category="Site-Wide Custom Events"
           data-label="Footer terms link"
           data-footer-link-id="terms"
           >Terms
         </a><a class="devsite-utility-footer-link gc-analytics-event"
           href="//www.google.com/policies/privacy/"
           data-category="Site-Wide Custom Events"
           data-label="Footer privacy link"
           data-footer-link-id="privacy"
           >Privacy
         </a></span></div><div class="devsite-utility-footer-nav-right"><div class="devsite-utility-footer-newsletter-signup-text">
        Sign up for the Google Developers newsletter
      </div><a class="button button-primary devsite-utility-footer-newsletter-signup-button"
         href="//services.google.com/fb/forms/googledevelopersnewsletter/?utm_medium=referral&amp;utm_source=google-products&amp;utm_team=googledevs&amp;utm_campaign=201611-newsletter-launch">
        
        Subscribe
      </a></div></nav></footer><div class="devsite-feedback-dialog devsite-dialog"><div class="devsite-dialog-contents"><h3>Send feedback about...</h3><div class="devsite-feedback-item"><a data-type="documentation" class="gc-analytics-event"
           data-category="Site-Wide Custom Events" data-label="Docs Feedback Image"
           track-type="feedback" track-name="feedbackDocIcon" track-metadata-position="header"><div class="devsite-feedback-item-icon-container"><div class="devsite-feedback-item-icon-white devsite-feedback-item-icon-docs
                        material-icons"></div></div></a><div class="devsite-feedback-item-name">
          
          This page
        </div><div class="devsite-feedback-item-description"><a data-type="documentation" tabindex="0" class="gc-analytics-event"
             data-category="Site-Wide Custom Events" data-label="Docs Feedback Text"
             track-type="feedback" track-name="feedbackDocText" track-metadata-position="header">
            
            Documentation feedback
          </a></div></div><div class="devsite-feedback-item"><a data-type="product" tabindex="0" class="gc-analytics-event"
           data-category="Site-Wide Custom Events" data-label="Product Feedback Image"
           track-type="feedback" track-name="feedbackProductIcon" track-metadata-position="header"
         ><img class="devsite-feedback-item-icon"
               src="https://developers.google.com/_static/d7147bb846/images/feedback/google_56px.svg"></a><div class="devsite-feedback-item-name">
        Android zero-touch enrollment
        </div><div class="devsite-feedback-item-description"><a data-type="product" tabindex="0" class="gc-analytics-event"
             data-category="Site-Wide Custom Events" data-label="Product Feedback Text"
             track-type="feedback" track-name="feedbackProductText" track-metadata-position="header"
           >
            
            Product feedback
          </a></div></div></div><div class="devsite-dialog-buttons"><button type="button" class="devsite-feedback-cancel button-white gc-analytics-event"
              data-category="Site-Wide Custom Events" data-label="Cancel Feedback Button"
              track-type="feedback" track-name="cancelFeedbackButton"
              track-metadata-position="header">
        
        Cancel
      </button></div></div><script>
  $(document).ready(function() {
    new devsite.feedback.Widget({
        'product_id': '1633838',
        'bucket': '',
        'context': '',
        'version': 'devsite-20180420-r00-rc00.default'
      },
      document.querySelectorAll('.devsite-feedback-button'),
      'en',
      document.querySelector('.devsite-site-mask'),
      document.querySelector('.devsite-feedback-dialog'),
      document.querySelector('.devsite-feedback-cancel'),
      document.querySelectorAll('.devsite-feedback-item a:not([href])')
    );
  });
  </script></div><script async defer src="//www.gstatic.com/feedback/api.js"></script><script src="https://developers.google.com/_static2/d7147bb846/jsi18n/"></script><script src="https://developers.google.com/_static/d7147bb846/js/script_foot_closure.js"></script><script src="https://developers.google.com/_static/d7147bb846/js/script_foot.js"></script><script>
        (function($) {
          
          devsite.devsite.Init($, {'ENABLE_BLOCKED_VIDEO_PLACEHOLDER': 0, 'SITE_NAME': 'devsite', 'FULL_SITE_SEARCH_ENABLED': 1, 'ENABLE_CLOUDTRACK': 0, 'VTAGS_ENABLED': 0, 'HISTORY_ENABLED': 1, 'VERSION_HASH': 'd7147bb846', 'SCRIPTSAFE_DOMAIN': 'google-developers.appspot.com', 'ENABLE_BLOCKED_LINK_TOOLTIP': 0, 'ALLOWED_HOSTS': ['.android.com', '.anvato.com', '.apigee.com', '.appspot.com', '.dialogflow.com', '.gonglchuangl.net', '.google.cn', '.google.com', '.googleplex.com', '.nest.com', '.openthread.io', '.openweave.io', '.orbitera.com', '.tensorflow.org'], 'BLOCK_RSS_FEEDS': 0},
                               '[]','en',
                               true, '',
                               {"f62218c009ec029abef196bba5aa34cf": true, "8de7a048f21618359bd37f5ce44be073": false, "098dafe57affddc137df300142652cfd": false, "8e03e230de0bd8a6fe173fdf172e8b3f": true, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "d169d485cf24243a263783dbe42029b1": true, "039e5d84b87fd75807ffb37b7f1bbf2c": true, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true}, '/zero-touch/',
                               'https://developers.google.com/');
        })(jQuery);

        
        devsite.localInit = function() {
          
        };

      </script><script>
      $('.devsite-utility-footer-language-select').each(function() {
        $(this).change(function(){$('.devsite-utility-footer-language').submit();});
      });
      </script></div><span id="devsite-request-elapsed" data-request-elapsed="205.38020134"></span></body></html>
